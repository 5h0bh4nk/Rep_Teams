(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{163:function(e,t,n){},202:function(e,t){e.exports=[{product:"Personal",link:"/"},{product:"Public",link:"/"},{product:"Community",link:"/"},{product:"Report",link:"/"},{product:"Doc",link:"/"},{product:"Terms",link:"/"}]},246:function(e,t){},249:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},273:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},293:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(15),o=n.n(s),r=n(17),i=n(211),l=n(102),d=n(103),u=n(113),j=n(112),h=n(44),m=n(136),b=n.n(m),f=n(186),p=n(105),g=n.n(p),O=n(370),v=n(356),x=n(357),y=n(358),w=n(194),S=n.n(w),N=n(195),C=n.n(N),k=n(197),U=n.n(k),M=n(198),T=n.n(M),A=n(199),D=n.n(A),E=n(200),L=n.n(E),I=n(196),R=n.n(I),H=n(201),V=n.n(H),q=n(16),B=(n(249),n(188)),P=n(29),J=n(350),G=n(351),_=n(352),F=n(353),W=n(354),z=n(355),Y=(n.p,n(2));var Q=function(e){var t=Object(a.useState)(!1),n=Object(q.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)("animated-icon2"),r=Object(q.a)(o,2),i=r[0],l=r[1],d=Object(a.useState)("h-items"),u=Object(q.a)(d,2),j=u[0],h=u[1];return Object(Y.jsx)("div",{className:"app-header-bar mb-3",children:Object(Y.jsxs)(J.a,{light:!0,expand:"md",children:[Object(Y.jsxs)("div",{className:"container-fluid",children:[Object(Y.jsx)(G.a,{href:"/home",children:"MEETS_HUB"}),Object(Y.jsx)(_.a,{className:"first-Button",onClick:function(){s(!c);var e=c?"h-items":"h-items-2";l("animated-icon2"===i?"animated-icon2 open":"animated-icon2"),h(e)},children:Object(Y.jsxs)("div",{className:i,children:[Object(Y.jsx)("span",{}),Object(Y.jsx)("span",{}),Object(Y.jsx)("span",{})]})})]}),Object(Y.jsx)(F.a,{isOpen:c,navbar:!0,children:Object(Y.jsxs)(W.a,{className:"mr-auto",navbar:!0,children:[Object(Y.jsx)(z.a,{className:j,children:Object(Y.jsx)(P.c,{exact:!0,to:"/home",className:"head-links",children:"Home"})}),Object(Y.jsx)("div",{className:j,children:" | "}),Object(Y.jsx)(z.a,{className:j,children:Object(Y.jsx)(P.c,{exact:!0,to:"/conversations",className:"head-links",children:"Conversations"})}),Object(Y.jsx)("div",{className:j,children:" | "}),Object(Y.jsx)(z.a,{className:j,children:Object(Y.jsx)(P.c,{exact:!0,to:"/dashboard",className:"head-links",children:"Dashboard"})}),Object(Y.jsx)("div",{className:j,children:" | "}),Object(Y.jsx)(z.a,{className:"",children:Object(Y.jsxs)(B.a,{outline:!0,color:"warning",onClick:e.logoutUser,className:"head-links",href:"",children:[Object(Y.jsx)("span",{class:"iconify","data-icon":"mdi-logout","data-inline":"false"}),"Logout"]})})]})})]})})},X=n(369),K=(n(261),n(72)),Z=(n(262),n(263),{iceServers:[{urls:["stun:stun.l.google.com:19302"]},{urls:["stun:bn-turn1.xirsys.com"]},{username:"igHRI0ItDbrX-wEflUG_qwtvG6MG6B90uNAWe_YM6xKYCv32g0I1GXQkeBP3aXYyAAAAAGDjYgBzaHViaDRuaw==",credential:"f11c8b22-ddc9-11eb-bd8e-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]}),$={},ee=null,te=null,ne=0,ae=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getPermissions=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return a.videoAvailable=!0})).catch((function(){return a.videoAvailable=!1}));case 3:return e.next=5,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(){return a.audioAvailable=!0})).catch((function(){return a.audioAvailable=!1}));case 5:navigator.mediaDevices.getDisplayMedia?a.setState({screenAvailable:!0}):a.setState({screenAvailable:!1}),(a.videoAvailable||a.audioAvailable)&&navigator.mediaDevices.getUserMedia({video:a.videoAvailable,audio:a.audioAvailable}).then((function(e){window.localStream=e,a.localVideoref.current.srcObject=e})).then((function(e){})).catch((function(e){return console.error(e)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),a.getMedia=function(){a.setState(Object(r.a)(Object(r.a)({},a.state),{},{video:a.videoAvailable,audio:a.audioAvailable}),(function(){a.getUserMedia(),a.connectToSocketServer()}))},a.getUserMedia=function(){if(a.state.video&&a.videoAvailable||a.state.audio&&a.audioAvailable)navigator.mediaDevices.getUserMedia({video:a.state.video,audio:a.state.audio}).then(a.getUserMediaSuccess).then((function(e){})).catch((function(e){return console.log(e)}));else try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(e){console.error(e)}},a.getUserMediaSuccess=function(e){try{window.localStream.getTracks().forEach((function(e){return e.stop()}))}catch(c){console.log(c)}window.localStream=e,a.localVideoref.current.srcObject=e;var t=function(e){if(e===te)return"continue";$[e].addStream(window.localStream),$[e].createOffer().then((function(t){$[e].setLocalDescription(t).then((function(){ee.emit("signal",e,JSON.stringify({sdp:$[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var n in $)t(n);e.getTracks().forEach((function(e){return e.onended=function(){a.setState({video:!1,audio:!1},(function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(c){console.log(c)}window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),a.localVideoref.current.srcObject=window.localStream;var e=function(e){$[e].addStream(window.localStream),$[e].createOffer().then((function(t){$[e].setLocalDescription(t).then((function(){ee.emit("signal",e,JSON.stringify({sdp:$[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var t in $)e(t)}))}}))},a.getDisplayMedia=function(){a.state.screen?navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then(a.getDisplayMediaSuccess).then((function(e){a.setState({myVideoClass:"my-video"===a.state.myVideoClass?"my-video-screen":"my-video"})})).catch((function(e){return console.log(e)})):a.setState({myVideoClass:"my-video"===a.state.myVideoClass?"my-video-screen":"my-video",video:!0},(function(){return a.getUserMedia()}))},a.getDisplayMediaSuccess=function(e){try{window.localStream.getTracks().forEach((function(e){return e.stop()}))}catch(c){console.log(c)}window.localStream=e,a.localVideoref.current.srcObject=e;var t=function(e){if(e===te)return"continue";$[e].addStream(window.localStream),$[e].createOffer().then((function(t){$[e].setLocalDescription(t).then((function(){ee.emit("signal",e,JSON.stringify({sdp:$[e].localDescription}))})).catch((function(e){return console.log(e)}))}))};for(var n in $)t(n);e.getTracks().forEach((function(e){return e.onended=function(){a.setState({screen:!1},(function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(c){console.log(c)}window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),a.localVideoref.current.srcObject=window.localStream,a.getUserMedia()}))}}))},a.gotMessageFromServer=function(e,t){var n=JSON.parse(t);e!==te&&(n.sdp&&$[e].setRemoteDescription(new RTCSessionDescription(n.sdp)).then((function(){"offer"===n.sdp.type&&$[e].createAnswer().then((function(t){$[e].setLocalDescription(t).then((function(){ee.emit("signal",e,JSON.stringify({sdp:$[e].localDescription}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})),n.ice&&$[e].addIceCandidate(new RTCIceCandidate(n.ice)).catch((function(e){return console.log(e)})))},a.changeCssVideos=function(e){var t="30%";30*e.offsetwidth/100<300&&(t="300px");var n=String(100/ne)+"%",a="";0===ne||1===ne?(a="400px",n="300px"):2===ne?(a="45%",n="50%"):3===ne||4===ne?(a="35%",n="50%"):a=String(100/ne)+"%";for(var c=e.querySelectorAll("video"),s=0;s<c.length;++s)c[s].style.minWidth=t,c[s].style.minHeight="40%",c[s].style.setProperty("width",a),c[s].style.setProperty("height",n);return{minWidth:t,minHeight:"40%",width:a,height:n}},a.connectToSocketServer=function(){(ee=g.a.connect("https://shubh-meet.herokuapp.com/",{secure:!0})).on("signal",a.gotMessageFromServer),ee.on("connect",(function(){ee.emit("join-call",{path:window.location.href,userId:a.props.auth.user.username}),te=ee.id,ee.on("chat-message",a.addMessage),ee.on("user-left",(function(e){var t=document.querySelector('[data-socket="'.concat(e,'"]'));if(null!==t){ne--,t.parentNode.removeChild(t);var n=document.getElementById("main");a.changeCssVideos(n)}})),ee.on("user-joined",(function(e,t){if(t.forEach((function(e){if($[e]=new RTCPeerConnection(Z),$[e].onicecandidate=function(t){null!=t.candidate&&ee.emit("signal",e,JSON.stringify({ice:t.candidate}))},$[e].onaddstream=function(n){var c=document.querySelector('[data-socket="'.concat(e,'"]'));if(null!==c)c.srcObject=n.stream;else{ne=t.length;var s=document.getElementById("main"),o=a.changeCssVideos(s),r=document.createElement("video"),i={minWidth:o.minWidth,minHeight:o.minHeight,maxHeight:"100%",margin:"10px",borderStyle:"solid",borderColor:"#bdbdbd",objectFit:"fill"};for(var l in i)r.style[l]=i[l];r.style.setProperty("width",o.width),r.style.setProperty("height",o.height),r.setAttribute("data-socket",e),r.srcObject=n.stream,r.autoplay=!0,r.playsinline=!0,s.appendChild(r)}},void 0!==window.localStream&&null!==window.localStream)$[e].addStream(window.localStream);else{window.localStream=function(){var e;return new MediaStream([(e=a).black.apply(e,arguments),a.silence()])}(),$[e].addStream(window.localStream)}})),e===te){var n=function(e){if(e===te)return"continue";try{$[e].addStream(window.localStream)}catch(t){}$[e].createOffer().then((function(t){$[e].setLocalDescription(t).then((function(){ee.emit("signal",e,JSON.stringify({sdp:$[e].localDescription}))})).catch((function(e){return console.error(e)}))}))};for(var c in $)n(c)}}))}))},a.silence=function(){var e=new AudioContext,t=e.createOscillator(),n=t.connect(e.createMediaStreamDestination());return t.start(),e.resume(),Object.assign(n.stream.getAudioTracks()[0],{enabled:!1})},a.black=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?640:t,a=e.height,c=void 0===a?480:a,s=Object.assign(document.createElement("canvas"),{width:n,height:c});s.getContext("2d").fillRect(0,0,n,c);var o=s.captureStream();return Object.assign(o.getVideoTracks()[0],{enabled:!1})},a.handleVideo=function(){return a.setState({video:!a.state.video},(function(){return a.getUserMedia()}))},a.handleAudio=function(){return a.setState({audio:!a.state.audio},(function(){return a.getUserMedia()}))},a.handleScreen=function(){return a.setState({screen:!a.state.screen,video:!1},(function(){return a.getDisplayMedia()}))},a.handleEndCall=function(){try{a.localVideoref.current.srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(e){}window.location.href="/conversations"},a.openChat=function(){return a.setState({showModal:!0,newmessages:0})},a.closeChat=function(){return a.setState({showModal:!1})},a.handleMessage=function(e){return a.setState({message:e.target.value})},a.addMessage=function(e,t,n){a.setState((function(n){return{messages:[].concat(Object(h.a)(n.messages),[{sender:t,data:e}])}})),n!==te&&a.setState({newmessages:a.state.newmessages+1})},a.handleUsername=function(e){return a.setState({username:e.target.value})},a.sendMessage=function(){""!==a.state.message&&(ee.emit("chat-message",a.state.message,a.state.username),a.setState({message:"",sender:a.state.username}))},a.copyUrl=function(){var e=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(e).then((function(){X.b.success("Link copied to clipboard!")}),(function(){X.b.error("Failed to copy")}));else{var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),X.b.success("Link copied to clipboard!")}catch(n){X.b.error("Failed to copy")}document.body.removeChild(t)}},a.connect=function(){return a.setState({askForUsername:!1},(function(){return a.getMedia()}))},a.isChrome=function(){var e=(navigator&&(navigator.userAgent||"")).toLowerCase(),t=(navigator&&(navigator.vendor||"")).toLowerCase();return null!==(/google inc/.test(t)?e.match(/(?:chrome|crios)\/(\d+)/):null)},a.localVideoref=c.a.createRef(),a.videoAvailable=!1,a.audioAvailable=!1,a.state={video:!1,audio:!1,screen:!1,showModal:!1,screenAvailable:!1,messages:[],message:"",newmessages:0,askForUsername:!0,username:a.props.auth.user.username,myVideoClass:"my-video",path:window.location.href.split("/")},$={},a.getPermissions(),a}return Object(d.a)(n,[{key:"onKeyUp",value:function(e){13===e.charCode?this.sendMessage():this.handleMessage()}},{key:"render",value:function(){var e=this;return this.isChrome()?Object(Y.jsxs)("div",{children:[Object(Y.jsx)(Q,{logoutUser:this.props.logoutUser,auth:this.props.auth}),this.state.askForUsername?Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"join-room-text",children:[Object(Y.jsx)(O.a,{placeholder:"Username",value:this.props.auth.user.username,onChange:function(t){return e.handleUsername(t)}}),Object(Y.jsx)(v.a,{variant:"contained",color:"primary",onClick:this.connect,style:{margin:"20px"},children:"Connect"})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)("video",{id:"my-video",ref:this.localVideoref,autoPlay:!0,muted:!0})})]}):Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"btn-down",children:[Object(Y.jsx)(x.a,{className:"ibtn",onClick:this.handleVideo,children:this.state.video?Object(Y.jsx)(S.a,{}):Object(Y.jsx)(C.a,{})}),Object(Y.jsx)(x.a,{className:"ibtn-danger",onClick:this.handleEndCall,children:Object(Y.jsx)(R.a,{})}),Object(Y.jsx)(x.a,{className:"ibtn",onClick:this.handleAudio,children:this.state.audio?Object(Y.jsx)(U.a,{}):Object(Y.jsx)(T.a,{})}),this.state.screenAvailable?Object(Y.jsx)(x.a,{className:"ibtn",onClick:this.handleScreen,children:this.state.screen?Object(Y.jsx)(D.a,{}):Object(Y.jsx)(L.a,{})}):null,Object(Y.jsx)(y.a,{badgeContent:this.state.newmessages,max:999,color:"secondary",onClick:this.openChat,children:Object(Y.jsx)(x.a,{className:"ibtn",onClick:this.openChat,children:Object(Y.jsx)(V.a,{})})})]}),Object(Y.jsxs)(K.a,{show:this.state.showModal,onHide:this.closeChat,style:{zIndex:"999999"},children:[Object(Y.jsx)(K.a.Header,{closeButton:!0,children:Object(Y.jsx)(K.a.Title,{children:"Chat Room"})}),Object(Y.jsx)(K.a.Body,{style:{overflow:"auto",overflowY:"auto",height:"400px",textAlign:"left"},children:this.state.messages.length>0?this.state.messages.map((function(e,t){return Object(Y.jsx)("div",{style:{textAlign:"left"},children:Object(Y.jsxs)("p",{style:{wordBreak:"break-all"},children:[Object(Y.jsx)("b",{children:e.sender}),": ",e.data]})},t)})):Object(Y.jsx)("p",{children:"No message yet"})}),Object(Y.jsxs)(K.a.Footer,{className:"div-send-msg",children:[Object(Y.jsx)(O.a,{placeholder:"Message",value:this.state.message,onChange:function(t){return e.handleMessage(t)}}),Object(Y.jsx)(v.a,{variant:"contained",color:"primary",onClick:this.sendMessage,children:"Send"})]})]}),Object(Y.jsxs)("div",{className:"container",children:[Object(Y.jsxs)("div",{className:"room-link",children:[Object(Y.jsxs)("div",{children:["ROOM ID : ",this.state.path[this.state.path.length-1]]}),Object(Y.jsx)("br",{}),Object(Y.jsx)(v.a,{variant:"outlined",color:"primary",className:"copybtn",onClick:this.copyUrl,children:"Copy invite link"})]}),Object(Y.jsx)("div",{id:"main",className:"flex-container",style:{margin:0,padding:0},children:Object(Y.jsx)("video",{id:this.state.myVideoClass,ref:this.localVideoref,autoPlay:!0,muted:!0})})]})]})]}):Object(Y.jsx)("div",{class:"uncompatible",children:Object(Y.jsx)("h1",{children:"Sorry, this works only with Google Chrome"})})}}]),n}(a.Component),ce=ae,se=(n(264),n(359)),oe=(n.p,n(202)),re=n.n(oe);var ie=function(e){var t=Object(a.useState)(!1),n=Object(q.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)("animated-icon1"),r=Object(q.a)(o,2),i=r[0],l=r[1];return Object(Y.jsxs)("div",{style:{justifyContent:"center"},children:[Object(Y.jsx)("section",{className:"mb-3",children:Object(Y.jsxs)(J.a,{color:"light",light:!0,expand:"md",children:[Object(Y.jsxs)("div",{className:"container-fluid",children:[Object(Y.jsx)(G.a,{href:"/home",children:"MEETS_HUB"}),Object(Y.jsx)(_.a,{className:"first-Button",onClick:function(){s(!c),l("animated-icon1"===i?"animated-icon1 open":"animated-icon1")},children:Object(Y.jsxs)("div",{className:i,children:[Object(Y.jsx)("span",{}),Object(Y.jsx)("span",{}),Object(Y.jsx)("span",{})]})})]}),Object(Y.jsx)(F.a,{isOpen:c,navbar:!0,children:Object(Y.jsxs)(W.a,{className:"mr-auto",navbar:!0,children:[Object(Y.jsx)(z.a,{children:Object(Y.jsx)(se.a,{href:"/components/",children:"Components"})}),re.a.map((function(e){return Object(Y.jsx)(z.a,{children:Object(Y.jsx)(se.a,{href:e.link,children:e.product})})}))]})})]})}),Object(Y.jsx)("div",{className:"info",children:Object(Y.jsxs)("p",{children:["Now use MEETS_HUB with family and friends to call, chat, and make plans. \xa0",Object(Y.jsxs)("a",{href:"/home",children:["Learn more ",">"]})]})})]})},le=(n(265),n(266),n(67)),de=n(371),ue=n(360),je=n(361),he=n(362),me=n(363),be=n(364),fe=n(365);n(267);var pe=function(e){var t=Object(a.useState)(!1),n=Object(q.a)(t,1)[0],c=Object(a.useState)({}),s=Object(q.a)(c,2),o=s[0],i=s[1],l=function(e){i(Object(r.a)(Object(r.a)({},o),{},Object(le.a)({},e.target.name,e.target.value)))},d=function(){return e.setLogin(!e.login)};return Object(Y.jsx)("div",{children:Object(Y.jsxs)(de.a,{isOpen:e.login,toggle:d,className:"login",unmountOnClose:n,children:[Object(Y.jsx)(ue.a,{toggle:d,children:"Login"}),Object(Y.jsx)(je.a,{children:Object(Y.jsxs)(he.a,{onSubmit:function(t){t.preventDefault(),d(),e.loginUser(o)},className:"row",children:[Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{for:"email",className:"col-5 col-sm-12",children:"Username"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"text",name:"username",onChange:l,id:"username",required:!0,placeholder:"Username"})]}),Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{className:"col-5 col-sm-12",for:"password",children:"Password"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"password",name:"password",onChange:l,id:"password",required:!0,placeholder:"password"})]}),Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(B.a,{type:"submit",value:"submit",className:"c-button-up small",children:"Login"})," "]})]})})]})})},ge=(n(268),"https://shub-meet-api.herokuapp.com/");var Oe=function(e){var t=Object(a.useState)({}),n=Object(q.a)(t,2),c=n[0],s=n[1],o=function(){return e.setSignin(!e.sign)};return Object(Y.jsx)("div",{children:Object(Y.jsxs)(de.a,{isOpen:e.sign,toggle:o,className:"login",unmountOnClose:!1,children:[Object(Y.jsx)(ue.a,{toggle:o,children:"Signup"}),Object(Y.jsx)(je.a,{children:Object(Y.jsxs)(he.a,{onSubmit:function(e){e.preventDefault(),e.target.password.value.length<=5?document.querySelector(".registrationError").innerHTML="Length of password must be greater than 5":e.target.password.value===e.target.cpassword.value?(!function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(ge+"users/signup",t).then((function(e){return e.json()})).then((function(e){e.err?document.querySelector(".registrationError").innerHTML=e.err.message:(document.querySelector(".successDisplay").innerHTML=e.status,document.querySelector(".errorDisplay").innerHTML="")})).catch((function(e){return console.error(e)}))}(c),o()):document.querySelector(".registrationError").innerHTML="Both passwords dont match . Try again !"},onChange:function(e){s(Object(r.a)(Object(r.a)({},c),{},Object(le.a)({},e.target.name,e.target.value)))},children:[Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{className:"col-5 col-sm-12",for:"name",children:"Name"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"text",name:"name",id:"name",placeholder:"Name",required:!0})]}),Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{className:"col-5 col-sm-12",for:"username",children:"Username"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"text",name:"username",id:"username",placeholder:"Username",required:!0})]}),Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{className:"col-5 col-sm-12",for:"password",children:"Password"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"password",name:"password",id:"password",placeholder:"password",required:!0})]}),Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{className:"col-5 col-sm-12",for:"confirmPassword",children:"Confirm Password"}),Object(Y.jsx)(fe.a,{className:"col-7 col-sm-12",type:"password",name:"cpassword",id:"cpassword",placeholder:"Confirm password",required:!0})]}),Object(Y.jsx)(B.a,{color:"primary",type:"submit",className:"c-button-up",children:"Register"})]})}),Object(Y.jsx)("div",{className:"registrationError"})]})})};var ve=function(e){var t=Object(a.useState)(!1),n=Object(q.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!1),r=Object(q.a)(o,2),i=r[0],l=r[1];return Object(Y.jsxs)("div",{className:"c-group links",children:[e.auth.isAuthenticated?Object(Y.jsxs)("div",{children:[Object(Y.jsx)("br",{}),Object(Y.jsx)("br",{}),Object(Y.jsxs)("h3",{className:"text-success text-center",children:[" Succesfully logged in as",Object(Y.jsxs)("span",{children:[" ",e.auth.user?e.auth.user.username:null]})]}),Object(Y.jsx)("br",{}),Object(Y.jsxs)("div",{className:"text-center",children:[Object(Y.jsxs)(B.a,{outline:!0,onClick:function(){e.logoutUser()},children:[Object(Y.jsx)("span",{className:"fa fa-sign-out fa-lg"})," Logout",e.auth.isLoading?Object(Y.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]}),"  ",Object(Y.jsx)(P.b,{to:"/dashboard",className:"btn",style:{backgroundColor:"#4b53bc",color:"white"},children:"Go to dashboard"})]})]}):Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"text-center",children:Object(Y.jsxs)(B.a,{onClick:function(){return s(!c)},className:"c-button-up",target:"_blank",children:[Object(Y.jsx)("span",{className:"fa fa-sign-out fa-lg"})," Sign in"," ",e.auth.isLoading?Object(Y.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]})}),Object(Y.jsx)("div",{className:"text-center",children:Object(Y.jsx)(B.a,{onClick:function(){return l(!i)},className:"c-button-in",target:"_blank",children:"Sign up for free"})}),e.auth.errMess?Object(Y.jsx)("div",{className:"errorDisplay",children:"Invalid Credentials / Error Occured"}):null,Object(Y.jsx)("div",{className:"errorDisplay"}),Object(Y.jsx)("div",{className:"successDisplay"})]}),c&&!e.auth.isAuthenticated?Object(Y.jsx)(pe,{loginUser:e.loginUser,login:c,auth:e.auth,setLogin:s}):null,!e.auth.isAuthenticated&&i?Object(Y.jsx)(Oe,{sign:i,auth:e.auth,setSignin:l}):null,Object(Y.jsx)("br",{}),Object(Y.jsx)("br",{})]})},xe=n.p+"static/media/demo.f4bf9a4a.webp",ye=n(83);var we=function(e){return Object(Y.jsx)(ye.Grid,{fluid:!0,children:Object(Y.jsxs)(ye.Row,{className:"flexbox row",children:[Object(Y.jsx)(ye.Col,{md:6,children:Object(Y.jsxs)("div",{className:"content",children:[Object(Y.jsx)("h1",{className:"c-heading-1",children:"MEETS_HUB"}),Object(Y.jsx)("p",{className:"c-heading-2",children:"Meet, chat, call, and collaborate in just one place."}),Object(Y.jsx)(ve,{auth:e.auth,loginUser:e.loginUser,logoutUser:e.logoutUser})]})}),Object(Y.jsx)(ye.Col,{md:6,children:Object(Y.jsx)("img",{width:"100%",height:"100%",src:xe,alt:"A family video call on Teams and the chat screen in Teams showing many conversations."})})]})})};var Se=function(e){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(ie,{}),Object(Y.jsx)(we,{auth:e.auth,loginUser:e.loginUser,logoutUser:e.logoutUser})]})};n(273);var Ne=function(e){var t=Object(a.useState)(""),n=Object(q.a)(t,2),c=n[0],s=n[1];return Object(Y.jsxs)("div",{className:"container2",children:[Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("h1",{class:"welcome-text",children:["Welcome, ",e.auth.user.username]}),Object(Y.jsx)("p",{children:"Stay in touch with all your friends, anytime , anywhere."})]}),Object(Y.jsxs)("div",{className:"joinBox",children:[Object(Y.jsx)("p",{children:"Enter the room code , paste the URL or start a meeting now"}),Object(Y.jsxs)(he.a,{onSubmit:function(e){if(5===c.length)window.location.href="/room/".concat(c);else if(""!==c){var t=c.split("/"),n=t[t.length-1];5!==n.length?document.getElementById("join-error").innerHTML="Invalid URL / Room Code":window.location.href="/room/".concat(n)}else{var a=Math.random().toString(36).substring(2,7);window.location.href="/room/".concat(a)}e.preventDefault()},children:[Object(Y.jsxs)(me.a,{children:[Object(Y.jsx)(be.a,{for:"url"}),Object(Y.jsx)(fe.a,{type:"text",name:"url",id:"url",placeholder:"URL / room code",onChange:function(e){return s(e.target.value)}})]}),Object(Y.jsx)("br",{}),Object(Y.jsx)(me.a,{children:Object(Y.jsx)(B.a,{type:"submit",value:"submit",color:"primary",children:"Connect"})}),Object(Y.jsx)("span",{children:"* click connect directly to create a new room"})]}),Object(Y.jsx)("div",{id:"join-error"})]})]})};var Ce=function(e){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(Q,{logoutUser:e.logoutUser,auth:e.auth}),Object(Y.jsx)(Ne,{auth:e.auth})]})},ke=n(22),Ue=n(372),Me=n(368),Te=n(42),Ae="LOGIN_REQUEST",De="LOGIN_SUCCESS",Ee="LOGIN_FAILURE",Le="LOGOUT_REQUEST",Ie="LOGOUT_SUCCESS",Re=function(e){return function(t){return t(function(e){return{type:Ae,creds:e}}(e)),fetch(ge+"users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(n){if(!n.success){var a=new Error("Error "+n.status);throw a.response=n,document.querySelector(".errorDisplay").innerHTML="An error occured !!",a}localStorage.setItem("token",n.token),localStorage.setItem("creds",JSON.stringify(e)),t(function(e){return{type:De,token:e.token}}(n))})).catch((function(e){return t((n=e.message,{type:Ee,message:n}));var n}))}},He=function(){return function(e){e({type:Le}),localStorage.removeItem("token"),localStorage.removeItem("creds"),e({type:Ie})}};n(275);function Ve(){return Object(Y.jsx)("div",{className:"conversation-search",children:Object(Y.jsx)("input",{type:"search",className:"conversation-search-input",placeholder:"Search Messages"})})}var qe=n(204);n(276);function Be(e){Object(a.useEffect)((function(){Object(qe.a)(".conversation-snippet",30)}));var t=e.data,n=t.name,c=t.text,s="/conversations/"+n;return Object(Y.jsx)("div",{className:"conversation-list-item",children:Object(Y.jsxs)("div",{className:"conversation-info",children:[Object(Y.jsx)(P.b,{to:s,className:"conversation-title",children:n}),Object(Y.jsx)("p",{className:"conversation-snippet",children:c})]})})}n(277);function Pe(e){var t=e.title,n=e.leftItems,a=e.rightItems;return Object(Y.jsxs)("div",{className:"toolbar",children:[Object(Y.jsx)("div",{className:"left-items",children:n}),Object(Y.jsx)("h1",{className:"toolbar-title",children:t}),Object(Y.jsx)("div",{className:"right-items",children:a})]})}n(278);function Je(e){var t=e.icon;return Object(Y.jsx)("i",{className:"toolbar-button ".concat(t),onClick:e.onClickfn})}n(163);var Ge=n(366),_e=n(373),Fe=n(374),We=n(367);var ze=function(){var e=Object(a.useState)(!1),t=Object(q.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),o=Object(q.a)(s,2),r=o[0],i=o[1];return Object(Y.jsx)("div",{children:Object(Y.jsxs)(Ge.a,{isOpen:n,toggle:function(){return c((function(e){return!e}))},children:[Object(Y.jsx)(_e.a,{outline:!0,className:"drop-icon",children:"+"}),Object(Y.jsxs)(Fe.a,{children:[Object(Y.jsx)(We.a,{style:{textAlign:"center",color:"blue"},disabled:!0,children:"Enter/Create room"}),Object(Y.jsx)(O.a,{type:"text",name:"url",id:"url",placeholder:"URL / room code",onChange:function(e){return i(e.target.value)}}),Object(Y.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(e){if(e.preventDefault(),5===r.length)window.location.href="/conversations/".concat(r);else if(""!==r){var t=r.split("/"),n=t[t.length-1];5!==n.length?document.getElementById("join-error").innerHTML="Invalid URL / Room Code":window.location.href="/conversations/".concat(n)}else document.getElementById("join-error").innerHTML="Room code not entered"},style:{marginLeft:"30px",marginTop:"10px"},children:"Connect"}),Object(Y.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(e){var t=Math.random().toString(36).substring(2,7);window.location.href="/conversations/".concat(t),e.preventDefault()},style:{marginLeft:"30px",marginRight:"30px",marginTop:"10px"},children:"Create Room"}),Object(Y.jsx)("div",{id:"join-error"})]})]})})};function Ye(e){var t=Object(a.useState)([]),n=Object(q.a)(t,2),c=n[0],s=n[1],o=Object(ke.g)();Object(a.useEffect)((function(){return r(),o.listen((function(e){r()}))}),[o]);var r=function(){var e=new Headers;e.append("Accept","application/json"),e.append("Content-Type","application/json"),e.append("Authorization","bearer "+localStorage.getItem("token")),fetch(ge+"groups",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e.filter((function(e){return 5===e.length})).map((function(e){return{name:"".concat(e),text:"Click on room to connect"}}));s([].concat(Object(h.a)(c),Object(h.a)(t)))}))};return Object(Y.jsxs)("div",{className:"conversation-list",children:[Object(Y.jsx)(Pe,{title:"Messenger",leftItems:[Object(Y.jsx)(Je,{icon:"ion-ios-cog"},"cog")],rightItems:[Object(Y.jsx)(ze,{})]}),Object(Y.jsx)(Ve,{}),c.map((function(e){return Object(Y.jsx)(Be,{data:e},e.name)}))]})}n(293);function Qe(e){return Object(Y.jsxs)("div",{className:"compose",children:[Object(Y.jsx)(he.a,{class:"compose-form",onSubmit:e.sendMessage,children:Object(Y.jsx)(fe.a,{type:"text",className:"compose-input",placeholder:"Type a message",value:e.message,onChange:function(t){return e.handleMessage(t)}})}),e.rightItems]})}var Xe=n(54),Ke=n.n(Xe);n(295);function Ze(e){var t=e.data,n=e.isMine,a=e.startsSequence,c=e.endsSequence,s=e.showTimestamp,o=Ke()(t.timestamp).format("LLLL");return Object(Y.jsxs)("div",{className:["message","".concat(n?"mine":""),"".concat(a?"start":""),"".concat(c?"end":"")].join(" "),children:[s&&Object(Y.jsx)("div",{className:"timestamp",children:o}),Object(Y.jsx)("div",{className:"bubble-container",children:Object(Y.jsxs)("div",{className:"bubble",title:o,children:[n?null:Object(Y.jsxs)("div",{style:{fontWeight:"bold"},children:[t.author,":"]})," ",t.message]})})]})}n(296);function $e(e){var t=localStorage.getItem("creds").split('"')[3],n=Object(a.useState)({}),c=Object(q.a)(n,2),s=c[0],o=c[1],r=Object(a.useState)(null),i=Object(q.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(""),j=Object(q.a)(u,2),m=j[0],b=j[1],f=Object(a.useState)([]),p=Object(q.a)(f,2),O=p[0],v=p[1],x=Object(ke.g)(),y=Object(a.useState)(""),w=Object(q.a)(y,2),S=w[0],N=w[1];Object(a.useEffect)((function(){return C(),x.listen((function(e){console.log(e);var t=e.pathname.split("/"),n=t[t.length-1];5===n.length&&N(n),M(),C()}))}),[x]);var C=function(){var e=new Headers;e.append("Accept","application/json"),e.append("Content-Type","application/json"),e.append("Authorization","bearer "+localStorage.getItem("token"));var t=window.location.href.split("/"),n=t[t.length-1];5===n.length&&(N(n),fetch(ge+"groups/"+n,{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){if(!e.error){var t=e.map((function(e){return{id:e._id,author:e.author,message:e.content,timestamp:e.createdAt}}));v([].concat(Object(h.a)(O),Object(h.a)(t)))}})).catch((function(e){return console.error(e)})))},k=function(e,t){var n=JSON.parse(t);if(null!==e){if(n.sdp){var a=s;a[e].setRemoteDescription(new RTCSessionDescription(n.sdp)).then((function(){"offer"===n.sdp.type&&a[e].createAnswer().then((function(t){a[e].setLocalDescription(t).then((function(){l.emit("signal",e,JSON.stringify({sdp:a[e].localDescription}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}n.ice&&a[e].addIceCandidate(new RTCIceCandidate(n.ice)).catch((function(e){return console.log(e)})),o(a)}},U=function(e,t,n){v((function(n){return[].concat(Object(h.a)(n),[{author:t,message:e,id:"111",timestamp:(new Date).getTime()}])}))},M=function(){var e=g.a.connect(ge,{secure:!0});d(e),e.on("signal",k),e.on("connect",(function(){e.emit("join-call",{path:window.location.href,userId:localStorage.getItem("creds").split('"')[3]});var t=e.id;console.log(t),e.on("chat-message",U),e.on("user-left",(function(e){console.log("User left")})),e.on("user-joined",(function(n,a){var c=s;if(a.forEach((function(t){c[t]=new RTCPeerConnection(Z),c[t].onicecandidate=function(n){null!=n.candidate&&e.emit("signal",t,JSON.stringify({ice:n.candidate}))}})),n===t){var r=function(n){if(n===t)return"continue";try{c[n].addStream(window.localStream)}catch(a){}c[n].createOffer().then((function(t){c[n].setLocalDescription(t).then((function(){e.emit("signal",n,JSON.stringify({sdp:c[n].localDescription}))})).catch((function(e){return console.error(e)}))}))};for(var i in c)r(i)}o(c)}))}))},T=localStorage.getItem("creds").split('"')[3],A=function(e){e.preventDefault(),""!==m&&(l?(l.emit("chat-message",m,T),b(""),D()):M())},D=function(){for(var e=0,n=O.length,a=[];e<n;){var c=O[e-1],s=O[e],o=O[e+1],r=s.author===t,i=Ke()(s.timestamp),l=!1,d=!0,u=!0,j=!0;if(c){var h=Ke()(c.timestamp),m=Ke.a.duration(i.diff(h));if((l=c.author===s.author)&&c.message===s.message){e++;continue}l&&m.as("hours")<1&&(d=!1),m.as("hours")<1&&(j=!1)}if(o){var b=Ke()(o.timestamp),f=Ke.a.duration(b.diff(i));o.author===s.author&&f.as("hours")<1&&(u=!1)}a.push(Object(Y.jsx)(Ze,{isMine:r,startsSequence:d,endsSequence:u,showTimestamp:j,data:s},e)),e+=1}return a};return""===S?Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"start-text-info",children:"Choose a Conversation to chat"}),Object(Y.jsx)("div",{className:"start-text-info",children:"Click + option besides Messenger to start a new Conversation"})]}):Object(Y.jsxs)("div",{className:"message-list",children:[Object(Y.jsx)(Pe,{title:"Room_ID : ".concat(S),rightItems:[Object(Y.jsx)(Je,{icon:"ion-ios-log-out",onClickfn:e.logoutUser},"info"),Object(Y.jsx)(P.b,{exact:!0,to:"/room/".concat(S),children:Object(Y.jsx)(Je,{icon:"ion-ios-videocam"},"video")})]}),Object(Y.jsx)("div",{className:"message-list-container",children:D()}),Object(Y.jsx)("div",{className:"wait"}),Object(Y.jsx)(Qe,{message:m,sendMessage:A,handleMessage:function(e){return b(e.target.value)},rightItems:[Object(Y.jsx)(Je,{icon:"ion-ios-send",onClickfn:A},"send")]})]})}n(297);function et(e){return Object(Y.jsxs)("div",{className:"messenger",children:[Object(Y.jsx)("div",{className:"scrollable sidebar",children:Object(Y.jsx)(Ye,{})}),Object(Y.jsx)("div",{className:"scrollable content",children:Object(Y.jsx)($e,{logoutUser:e.logoutUser})})]})}function tt(e){return Object(Y.jsxs)("div",{className:"App",children:[Object(Y.jsx)(Q,{logoutUser:e.logoutUser}),Object(Y.jsx)(et,{logoutUser:e.logoutUser})]})}var nt=["component"],at=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.auth.token){var t=new Headers;t.append("Authorization","bearer "+localStorage.getItem("token")),t.append("Content-Type","application/json"),fetch(ge+"users/checkJWTToken",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){console.log("data",t),t.success||t.error||(e.props.logoutUser(),console.log("khatam"),e.props.history.push("/home"))}))}}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.auth.token){var t=new Headers;t.append("Authorization","bearer "+localStorage.getItem("token")),t.append("Content-Type","application/json"),fetch(ge+"users/checkJWTToken",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){console.log("data",t),t.success||t.error||(e.props.logoutUser(),e.props.history.push("/home"))}))}}},{key:"render",value:function(){var e=this,t=function(){return Object(Y.jsx)(tt,{auth:e.props.auth,logoutUser:e.props.logoutUser})},n=function(t){var n=t.component,a=Object(i.a)(t,nt);return Object(Y.jsx)(ke.b,Object(r.a)(Object(r.a)({},a),{},{render:function(t){return e.props.auth.isAuthenticated?Object(Y.jsx)(n,Object(r.a)({},t)):Object(Y.jsx)(ke.a,{to:{pathname:"/home",state:{from:t.location}}})}}))};return Object(Y.jsx)("div",{children:Object(Y.jsx)(P.a,{children:Object(Y.jsx)(Ue.a,{children:Object(Y.jsx)(Me.a,{classNames:"page",timeout:300,children:Object(Y.jsxs)(ke.d,{children:[Object(Y.jsx)(ke.b,{exact:!0,path:"/home",component:function(){return Object(Y.jsx)(Se,{auth:e.props.auth,loginUser:e.props.loginUser,logoutUser:e.props.logoutUser})}}),Object(Y.jsx)(n,{exact:!0,path:"/dashboard",component:function(){return Object(Y.jsx)(Ce,{logoutUser:e.props.logoutUser,auth:e.props.auth})}}),Object(Y.jsx)(n,{path:"/room/:roomId",component:function(){return Object(Y.jsx)(ce,{auth:e.props.auth})}}),Object(Y.jsx)(n,{path:"/conversations",component:t}),Object(Y.jsx)(n,{path:"/conversations/:roomId",component:t}),Object(Y.jsx)(ke.a,{to:"/home"})]})},this.props.location.key)})})})}}]),n}(a.Component),ct=Object(ke.h)(Object(Te.connect)((function(e){return{auth:e.auth}}),(function(e){return{loginUser:function(t){return e(Re(t))},logoutUser:function(){return e(He())}}}))(at)),st=(n(298),n(56)),ot=n(207),rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!0,isAuthenticated:!1,user:t.creds});case De:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token});case Ee:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isAuthenticated:!1,errMess:t.message});case Le:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case Ie:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isAuthenticated:!1,token:"",user:null});default:return e}},it=n(209),lt=n(208),dt=n.n(lt),ut={firstname:"",lastname:"",telnum:"",email:"",agree:!1,contactType:"Tel.",message:""},jt=Object(st.createStore)(Object(st.combineReducers)(Object(r.a)({auth:rt},Object(ot.createForms)({feedback:ut}))),Object(st.applyMiddleware)(it.a,dt.a));o.a.render(Object(Y.jsx)(P.a,{children:Object(Y.jsx)(Te.Provider,{store:jt,children:Object(Y.jsx)(ct,{})})}),document.getElementById("root"))}},[[334,1,2]]]);
//# sourceMappingURL=main.92c8b8a3.chunk.js.map