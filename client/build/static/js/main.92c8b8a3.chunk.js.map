{"version":3,"sources":["shared/storage/data.js","shared/images/logo-white.png","Components/Header/Header.js","Containers/Room/Helpers/peerConnectionConfig.js","Containers/Room/Video.js","shared/images/mslogo.svg","Components/Navbar/Navbar.js","Containers/Login/Login.js","shared/basUrl.js","Containers/Signup/Signup.js","Components/SignButtons/SignButtons.js","shared/images/demo.webp","Components/Jumbotron/jumbotron.js","Containers/Homepage/Homepage.js","Containers/MeetStart/Home.js","Containers/Dashboard/Dashboard.js","redux/ActionTypes.js","redux/ActionCreators.js","Messenger/ConversationSearch/index.js","Messenger/ConversationListItem/index.js","Messenger/Toolbar/index.js","Messenger/ToolbarButton/index.js","Messenger/ConversationList/Dropdown.js","Messenger/ConversationList/index.js","Messenger/Compose/index.js","Messenger/Message/index.js","Messenger/MessageList/index.js","Messenger/Messenger/Messenger.js","Messenger/App/index.js","App.js","redux/auth.js","redux/forms.js","index.js","redux/configureStore.js"],"names":["module","exports","product","link","Header","props","useState","isOpen","setIsOpen","cname","setCname","itemClass","setItemClass","className","Navbar","light","expand","NavbarBrand","href","NavbarToggler","onClick","navlinkClass","Collapse","navbar","Nav","NavItem","exact","to","outline","color","logoutUser","class","peerConnectionConfig","urls","username","credential","connections","socket","socketId","elms","Video","getPermissions","a","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","error","getMedia","state","connectToSocketServer","getUserMediaSuccess","log","getTracks","forEach","track","stop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","localDescription","onended","MediaStream","black","silence","blackSilence","screen","getDisplayMediaSuccess","myVideoClass","gotMessageFromServer","fromId","message","signal","parse","sdp","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","minWidth","offsetwidth","height","String","width","videos","querySelectorAll","length","style","minHeight","setProperty","io","connect","secure","on","path","location","userId","auth","user","addMessage","document","querySelector","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","Object","assign","getAudioTracks","enabled","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","sendMessage","copyUrl","text","clipboard","writeText","success","textArea","body","focus","select","execCommand","err","askForUsername","isChrome","userAgent","toLowerCase","vendor","test","match","React","createRef","split","charCode","this","Input","placeholder","onChange","Button","variant","ref","autoPlay","muted","IconButton","Badge","badgeContent","max","Modal","show","onHide","zIndex","closeButton","Title","Body","overflow","overflowY","textAlign","map","item","index","wordBreak","Footer","padding","Component","NavbarMain","justifyContent","NavLink","NavItems","Login","unmountOnClose","formdata","setformData","handleChange","name","toggleModal","setLogin","login","toggle","ModalHeader","ModalBody","Form","onSubmit","preventDefault","loginUser","FormGroup","Label","for","required","baseUrl","Signup","formData","setFormData","setSignin","sign","password","innerHTML","cpassword","requestOptions","method","headers","fetch","response","json","status","RegisterUser","SignButtons","isAuthenticated","isLoading","backgroundColor","errMess","jumbotron","fluid","md","src","demo","alt","Homepage","Home","url","setUrl","room","roomCode","newurl","Math","random","toString","substring","Dashboard","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_REQUEST","LOGOUT_SUCCESS","creds","dispatch","ActionTypes","requestLogin","ok","Error","statusText","localStorage","setItem","token","receiveLogin","removeItem","ConversationSearch","ConversationListItem","useEffect","shave","Toolbar","title","leftItems","rightItems","ToolbarButton","icon","onClickfn","MyDropdown","dropdownOpen","setDropdownOpen","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","disabled","marginLeft","marginTop","marginRight","ConversationList","conversations","setConversations","history","useHistory","getConversations","listen","myHeader","Headers","append","getItem","newConversations","filter","resp","result","conversation","Compose","Message","isMine","startsSequence","endsSequence","showTimestamp","friendlyTimestamp","moment","timestamp","format","join","fontWeight","author","MessageList","MY_USER_ID","myconnections","setConnections","mysocket","setSocket","setMessage","setMessages","roomId","setRoomId","getMessages","currlocation","pathname","tempMessages","_id","content","createdAt","msg","Date","getTime","renderMessages","messageCount","previous","next","currentMoment","prevBySameAuthor","previousMoment","previousDuration","duration","diff","as","nextMoment","nextDuration","push","Messenger","App","myHeaders","PrivateRoute","component","rest","render","from","TransitionGroup","CSSTransition","classNames","timeout","key","withRouter","Auth","action","InitialFeedback","firstname","lastname","telnum","email","agree","contactType","store","createStore","combineReducers","createForms","feedback","applyMiddleware","thunk","logger","ReactDOM"],"mappings":"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","file":"static/js/main.92c8b8a3.chunk.js","sourcesContent":["module.exports = [\r\n    {\r\n        product: \"Personal\",\r\n        link: \"/\"\r\n    },\r\n    {\r\n        product: \"Public\",\r\n        link: \"/\"\r\n    },\r\n    {\r\n        product: \"Community\",\r\n        link: \"/\"\r\n    },\r\n    {\r\n        product: \"Report\",\r\n        link: \"/\"\r\n    },\r\n    {\r\n        product: \"Doc\",\r\n        link: \"/\"\r\n    },\r\n    {\r\n        product: \"Terms\",\r\n        link: \"/\"\r\n    }\r\n]","export default __webpack_public_path__ + \"static/media/logo-white.a4640c3f.png\";","/** @format */\r\n\r\nimport { React, useState } from 'react'\r\nimport './Header.css'\r\nimport { Button } from 'reactstrap'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem } from 'reactstrap'\r\nimport logo from '../../shared/images/logo-white.png'\r\n\r\nfunction Header(props) {\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst [cname, setCname] = useState('animated-icon2')\r\n\tconst [itemClass, setItemClass] = useState('h-items')\r\n\tconst toggle = () => {\r\n\t\tsetIsOpen(!isOpen)\r\n\t\tvar Togglercss = cname === 'animated-icon2' ? 'animated-icon2 open' : 'animated-icon2'\r\n\t\tvar navlinkClass = !isOpen ? 'h-items-2' : 'h-items'\r\n\t\tsetCname(Togglercss)\r\n\t\tsetItemClass(navlinkClass)\r\n\t}\r\n\treturn (\r\n\t\t<div className='app-header-bar mb-3'>\r\n\t\t\t<Navbar light expand='md'>\r\n\t\t\t\t<div className='container-fluid'>\r\n\t\t\t\t\t<NavbarBrand href='/home'>\r\n\t\t\t\t\t\tMEETS_HUB\r\n\t\t\t\t\t</NavbarBrand>\r\n\t\t\t\t\t<NavbarToggler className='first-Button' onClick={toggle}>\r\n\t\t\t\t\t\t<div className={cname}>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</NavbarToggler>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Collapse isOpen={isOpen} navbar>\r\n\t\t\t\t\t<Nav className='mr-auto' navbar>\r\n\t\t\t\t\t\t<NavItem className={itemClass}>\r\n\t\t\t\t\t\t\t<NavLink exact to='/home' className='head-links'>\r\n\t\t\t\t\t\t\t\tHome\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t<div className={itemClass}>{' | '}</div>\r\n\t\t\t\t\t\t<NavItem className={itemClass}>\r\n\t\t\t\t\t\t\t<NavLink exact to='/conversations' className='head-links'>\r\n\t\t\t\t\t\t\t\tConversations\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t<div className={itemClass}>{' | '}</div>\r\n\t\t\t\t\t\t<NavItem className={itemClass}>\r\n\t\t\t\t\t\t\t<NavLink exact to='/dashboard' className='head-links'>\r\n\t\t\t\t\t\t\t\tDashboard\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t<div className={itemClass}>{' | '}</div>\r\n\t\t\t\t\t\t<NavItem className=''>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\t\tcolor='warning'\r\n\t\t\t\t\t\t\t\tonClick={props.logoutUser}\r\n\t\t\t\t\t\t\t\tclassName='head-links'\r\n\t\t\t\t\t\t\t\thref=''>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass='iconify'\r\n\t\t\t\t\t\t\t\t\tdata-icon='mdi-logout'\r\n\t\t\t\t\t\t\t\t\tdata-inline='false'></span>\r\n\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Collapse>\r\n\t\t\t</Navbar>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","export const peerConnectionConfig = {\r\n\t'iceServers': [\r\n\t {\r\n\t\turls: [ \"stun:stun.l.google.com:19302\" ]\r\n\t },\r\n\t {\r\n\t\turls: [ \"stun:bn-turn1.xirsys.com\" ]\r\n\t }, {\r\n\t\tusername: \"igHRI0ItDbrX-wEflUG_qwtvG6MG6B90uNAWe_YM6xKYCv32g0I1GXQkeBP3aXYyAAAAAGDjYgBzaHViaDRuaw==\",\r\n\t\tcredential: \"f11c8b22-ddc9-11eb-bd8e-0242ac140004\",\r\n\t\turls: [\r\n\t\t\t\"turn:bn-turn1.xirsys.com:80?transport=udp\",\r\n\t\t\t\"turn:bn-turn1.xirsys.com:3478?transport=udp\",\r\n\t\t\t\"turn:bn-turn1.xirsys.com:80?transport=tcp\",\r\n\t\t\t\"turn:bn-turn1.xirsys.com:3478?transport=tcp\",\r\n\t\t\t\"turns:bn-turn1.xirsys.com:443?transport=tcp\",\r\n\t\t\t\"turns:bn-turn1.xirsys.com:5349?transport=tcp\"\r\n\t\t]\r\n\t }\r\n\t]\r\n}","import React, { Component } from 'react'\r\nimport io from 'socket.io-client'\r\nimport {IconButton, Badge, Input, Button} from '@material-ui/core'\r\nimport VideocamIcon from '@material-ui/icons/Videocam'\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\r\nimport MicIcon from '@material-ui/icons/Mic'\r\nimport MicOffIcon from '@material-ui/icons/MicOff'\r\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\r\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare'\r\nimport CallEndIcon from '@material-ui/icons/CallEnd'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\nimport Header from '../../Components/Header/Header'\r\n\r\nimport { message } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport \"./Video.css\"\r\nimport {peerConnectionConfig} from './Helpers/peerConnectionConfig';\r\nconst server_url = process.env.NODE_ENV === 'production' ? 'https://shubh-meet.herokuapp.com/' : \"http://localhost:4001\"\r\n\r\n\r\nvar connections = {}\r\n\r\nvar socket = null\r\nvar socketId = null\r\nvar elms = 0\r\n\r\nclass Video extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.localVideoref = React.createRef()\r\n\r\n\t\tthis.videoAvailable = false\r\n\t\tthis.audioAvailable = false\r\n\r\n\t\tthis.state = {\r\n\t\t\tvideo: false,\r\n\t\t\taudio: false,\r\n\t\t\tscreen: false,\r\n\t\t\tshowModal: false,\r\n\t\t\tscreenAvailable: false,\r\n\t\t\tmessages: [],\r\n\t\t\tmessage: \"\",\r\n\t\t\tnewmessages: 0,\r\n\t\t\taskForUsername: true,\r\n\t\t\tusername: this.props.auth.user.username,\r\n\t\t\tmyVideoClass: \"my-video\",\r\n\t\t\tpath: window.location.href.split(\"/\")\r\n\t\t}\r\n\t\tconnections = {}\r\n\r\n\t\tthis.getPermissions()\r\n\t}\r\n\r\n\tgetPermissions = async () => {\r\n\t\ttry{\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t.then(() => this.videoAvailable = true)\r\n\t\t\t\t.catch(() => this.videoAvailable = false)\r\n\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ audio: true })\r\n\t\t\t\t.then(() => this.audioAvailable = true)\r\n\t\t\t\t.catch(() => this.audioAvailable = false)\r\n\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tthis.setState({ screenAvailable: true })\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ screenAvailable: false })\r\n\t\t\t}\r\n\r\n\t\t\t/// webrtc usage\r\n\t\t\tif (this.videoAvailable || this.audioAvailable) {\r\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.videoAvailable, audio: this.audioAvailable })\r\n\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\twindow.localStream = stream\r\n\t\t\t\t\t\tthis.localVideoref.current.srcObject = stream\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.error(e))\r\n\t\t\t}\r\n\t\t} catch(e) { console.error(e) }\r\n\t}\r\n\r\n\tgetMedia = () => {\r\n\t\tthis.setState({\r\n\t\t\t...this.state,\r\n\t\t\tvideo: this.videoAvailable,\r\n\t\t\taudio: this.audioAvailable\r\n\t\t}, () => {\r\n\t\t\tthis.getUserMedia();\r\n\t\t\tthis.connectToSocketServer();\r\n\t\t})\r\n\t}\r\n\r\n\tgetUserMedia = () => {\r\n\t\t// get media ( audio and video ) if the browser is allowed permissions\r\n\t\tif ((this.state.video && this.videoAvailable) || (this.state.audio && this.audioAvailable)) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.state.video, audio: this.state.audio })\r\n\t\t\t\t.then(this.getUserMediaSuccess)\r\n\t\t\t\t.then((stream) => {})\r\n\t\t\t\t.catch((e) => console.log(e))\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\t// else stop all tracks\r\n\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t} catch (e) {console.error(e)}\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideo: false,\r\n\t\t\t\taudio: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tfor (let id in connections) {\r\n\t\t\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t/// check\r\n\tgetDisplayMedia = () => {\r\n\t\tif (this.state.screen) {\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tnavigator.mediaDevices.getDisplayMedia({ video: true, audio: true })\r\n\t\t\t\t\t.then(this.getDisplayMediaSuccess)\r\n\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\tthis.setState({myVideoClass: (this.state.myVideoClass==='my-video')?'my-video-screen':'my-video'})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.setState({myVideoClass: (this.state.myVideoClass==='my-video')?'my-video-screen':'my-video', video: true}, () => this.getUserMedia())\r\n\t\t}\r\n\t}\r\n\r\n\tgetDisplayMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue;\r\n\r\n\t\t\tconnections[id].addStream(window.localStream);\r\n\r\n\t\t\t// eslint-disable-next-line no-loop-func\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tscreen: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tthis.getUserMedia()\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgotMessageFromServer = (fromId, message) => {\r\n\t\tvar signal = JSON.parse(message)\r\n\r\n\t\tif (fromId !== socketId) {\r\n\t\t\tif (signal.sdp) {\r\n\t\t\t\tconnections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\r\n\t\t\t\t\tif (signal.sdp.type === 'offer') {\r\n\t\t\t\t\t\tconnections[fromId].createAnswer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[fromId].setLocalDescription(description).then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', fromId, JSON.stringify({ 'sdp': connections[fromId].localDescription }))\r\n\t\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n\t\t\tif (signal.ice) {\r\n\t\t\t\tconnections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchangeCssVideos = (main) => {\r\n\t\tlet widthMain = main.offsetwidth\r\n\t\tlet minWidth = \"30%\"\r\n\t\tif ((widthMain * 30 / 100) < 300) {\r\n\t\t\tminWidth = \"300px\"\r\n\t\t}\r\n\t\tlet minHeight = \"40%\"\r\n\r\n\t\tlet height = String(100 / elms) + \"%\"\r\n\t\tlet width = \"\"\r\n\t\tif(elms === 0 || elms === 1) {\r\n\t\t\twidth = \"400px\"\r\n\t\t\theight = \"300px\"\r\n\t\t} else if (elms === 2) {\r\n\t\t\twidth = \"45%\"\r\n\t\t\theight = \"50%\"\r\n\t\t} else if (elms === 3 || elms === 4) {\r\n\t\t\twidth = \"35%\"\r\n\t\t\theight = \"50%\"\r\n\t\t} else {\r\n\t\t\twidth = String(100 / elms) + \"%\"\r\n\t\t}\r\n\r\n\t\tlet videos = main.querySelectorAll(\"video\")\r\n\t\tfor (let a = 0; a < videos.length; ++a) {\r\n\t\t\tvideos[a].style.minWidth = minWidth\r\n\t\t\tvideos[a].style.minHeight = minHeight\r\n\t\t\tvideos[a].style.setProperty(\"width\", width)\r\n\t\t\tvideos[a].style.setProperty(\"height\", height)\r\n\t\t}\r\n\r\n\t\treturn {minWidth, minHeight, width, height}\r\n\t}\r\n\r\n\tconnectToSocketServer = () => {\r\n\t\tsocket = io.connect(server_url, { secure: true })\r\n\r\n\t\tsocket.on('signal', this.gotMessageFromServer)\r\n\r\n\t\tsocket.on('connect', () => {\r\n\t\t\tsocket.emit('join-call', {path: window.location.href, userId: this.props.auth.user.username})\r\n\t\t\tsocketId = socket.id\r\n\r\n\t\t\tsocket.on('chat-message', this.addMessage)\r\n\r\n\t\t\tsocket.on('user-left', (id) => {\r\n\t\t\t\tlet video = document.querySelector(`[data-socket=\"${id}\"]`)\r\n\t\t\t\tif (video !== null) {\r\n\t\t\t\t\telms--\r\n\t\t\t\t\tvideo.parentNode.removeChild(video)\r\n\r\n\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\tthis.changeCssVideos(main)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsocket.on('user-joined', (id, clients) => {\r\n\t\t\t\tclients.forEach((socketListId) => {\r\n\t\t\t\t\tconnections[socketListId] = new RTCPeerConnection(peerConnectionConfig)\r\n\t\t\t\t\t// Wait for their ice candidate       \r\n\t\t\t\t\tconnections[socketListId].onicecandidate = function (event) {\r\n\t\t\t\t\t\tif (event.candidate != null) {\r\n\t\t\t\t\t\t\tsocket.emit('signal', socketListId, JSON.stringify({ 'ice': event.candidate }))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Wait for their video stream\r\n\t\t\t\t\tconnections[socketListId].onaddstream = (event) => {\r\n\t\t\t\t\t\t// TODO mute button, full screen button\r\n\t\t\t\t\t\tvar searchVidep = document.querySelector(`[data-socket=\"${socketListId}\"]`)\r\n\t\t\t\t\t\tif (searchVidep !== null) { // if i don't do this check it make an empyt square\r\n\t\t\t\t\t\t\tsearchVidep.srcObject = event.stream\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telms = clients.length\r\n\t\t\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\t\t\tlet cssMesure = this.changeCssVideos(main)\r\n\r\n\t\t\t\t\t\t\tlet video = document.createElement('video')\r\n\r\n\t\t\t\t\t\t\tlet css = {minWidth: cssMesure.minWidth, minHeight: cssMesure.minHeight, maxHeight: \"100%\", margin: \"10px\",\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\", borderColor: \"#bdbdbd\", objectFit: \"fill\"}\r\n\t\t\t\t\t\t\tfor(let i in css) video.style[i] = css[i]\r\n\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"width\", cssMesure.width)\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"height\", cssMesure.height)\r\n\t\t\t\t\t\t\tvideo.setAttribute('data-socket', socketListId)\r\n\t\t\t\t\t\t\tvideo.srcObject = event.stream\r\n\t\t\t\t\t\t\tvideo.autoplay = true\r\n\t\t\t\t\t\t\tvideo.playsinline = true\r\n\r\n\t\t\t\t\t\t\tmain.appendChild(video)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add the local video stream\r\n\t\t\t\t\tif (window.localStream !== undefined && window.localStream !== null) {\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (id === socketId) {\r\n\t\t\t\t\tfor (let id2 in connections) {\r\n\t\t\t\t\t\tif (id2 === socketId) continue\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconnections[id2].addStream(window.localStream)\r\n\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\r\n\t\t\t\t\t\tconnections[id2].createOffer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[id2].setLocalDescription(description)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tsocket.emit('signal', id2, JSON.stringify({ 'sdp': connections[id2].localDescription }))\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => console.error(e))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tsilence = () => {\r\n\t\tlet ctx = new AudioContext()\r\n\t\tlet oscillator = ctx.createOscillator()\r\n\t\tlet dst = oscillator.connect(ctx.createMediaStreamDestination())\r\n\t\toscillator.start()\r\n\t\tctx.resume()\r\n\t\treturn Object.assign(dst.stream.getAudioTracks()[0], { enabled: false })\r\n\t}\r\n\tblack = ({ width = 640, height = 480 } = {}) => {\r\n\t\tlet canvas = Object.assign(document.createElement(\"canvas\"), { width, height })\r\n\t\tcanvas.getContext('2d').fillRect(0, 0, width, height)\r\n\t\tlet stream = canvas.captureStream()\r\n\t\treturn Object.assign(stream.getVideoTracks()[0], { enabled: false })\r\n\t}\r\n\r\n\thandleVideo = () => this.setState({ video: !this.state.video }, () => this.getUserMedia())\r\n\thandleAudio = () => this.setState({ audio: !this.state.audio }, () => this.getUserMedia())\r\n\thandleScreen = () => this.setState({ screen: !this.state.screen, video: false }, () => this.getDisplayMedia())\r\n\r\n\thandleEndCall = () => {\r\n\t\ttry {\r\n\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\ttracks.forEach(track => track.stop())\r\n\t\t} catch (e) {}\r\n\t\twindow.location.href = \"/conversations\"\r\n\t}\r\n\r\n\topenChat = () => this.setState({ showModal: true, newmessages: 0 })\r\n\tcloseChat = () => this.setState({ showModal: false })\r\n\thandleMessage = (e) => this.setState({ message: e.target.value })\r\n\taddMessage = (data, sender, socketIdSender) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tmessages: [...prevState.messages, { \"sender\": sender, \"data\": data }],\r\n\t\t}))\r\n\t\tif (socketIdSender !== socketId) {\r\n\t\t\tthis.setState({ newmessages: this.state.newmessages + 1 })\r\n\t\t}\r\n\t}\r\n\r\n\thandleUsername = (e) => this.setState({ username: e.target.value })\r\n\r\n\tsendMessage = () => {\r\n\t\tif(this.state.message===\"\") return;\r\n\t\tsocket.emit('chat-message', this.state.message, this.state.username)\r\n\t\tthis.setState({ message: \"\", sender: this.state.username })\r\n\t}\r\n\r\n\tcopyUrl = () => {\r\n\t\tlet text = window.location.href\r\n\t\tif (!navigator.clipboard) {\r\n\t\t\tlet textArea = document.createElement(\"textarea\")\r\n\t\t\ttextArea.value = text\r\n\t\t\tdocument.body.appendChild(textArea)\r\n\t\t\ttextArea.focus()\r\n\t\t\ttextArea.select()\r\n\t\t\ttry {\r\n\t\t\t\tdocument.execCommand('copy')\r\n\t\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t\t} catch (err) {\r\n\t\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t\t}\r\n\t\t\tdocument.body.removeChild(textArea)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tnavigator.clipboard.writeText(text).then(function () {\r\n\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t}, () => {\r\n\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t})\r\n\t}\r\n\r\n\tconnect = () => this.setState({ askForUsername: false }, () => this.getMedia())\r\n\r\n\tisChrome = function () {\r\n\t\tlet userAgent = (navigator && (navigator.userAgent || '')).toLowerCase()\r\n\t\tlet vendor = (navigator && (navigator.vendor || '')).toLowerCase()\r\n\t\tlet matchChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/) : null\r\n\t\t// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\r\n\t\t// return matchChrome !== null || matchFirefox !== null\r\n\t\treturn matchChrome !== null\r\n\t}\r\n\r\n\tonKeyUp(event) {\r\n\t\tif (event.charCode === 13) {\r\n\t\t  this.sendMessage();\r\n\t\t}\r\n\t\telse this.handleMessage();\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(!this.isChrome()){\r\n\t\t\treturn (\r\n\t\t\t\t<div class=\"uncompatible\">\r\n\t\t\t\t\t<h1>Sorry, this works only with Google Chrome</h1>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Header logoutUser = {this.props.logoutUser} auth = {this.props.auth} />\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.askForUsername?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"join-room-text\">\r\n\t\t\t\t\t\t\t<Input placeholder=\"Username\" value={this.props.auth.user.username} onChange={e => this.handleUsername(e)} />\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.connect} style={{ margin: \"20px\" }}>Connect</Button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div >\r\n\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted >\r\n\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"btn-down\">\r\n\t\t\t\t\t\t\t<IconButton className=\"ibtn\" onClick={this.handleVideo}>\r\n\t\t\t\t\t\t\t\t{(this.state.video) ? <VideocamIcon /> : <VideocamOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton className=\"ibtn-danger\" onClick={this.handleEndCall}>\r\n\t\t\t\t\t\t\t\t<CallEndIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton className=\"ibtn\" onClick={this.handleAudio}>\r\n\t\t\t\t\t\t\t\t{this.state.audio  ? <MicIcon /> : <MicOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.screenAvailable  ?\r\n\t\t\t\t\t\t\t\t<IconButton className=\"ibtn\" onClick={this.handleScreen}>\r\n\t\t\t\t\t\t\t\t\t{this.state.screen  ? <ScreenShareIcon /> : <StopScreenShareIcon />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t<Badge badgeContent={this.state.newmessages} max={999} color=\"secondary\" onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t<IconButton className=\"ibtn\" onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Modal show={this.state.showModal} onHide={this.closeChat} style={{ zIndex: \"999999\" }}>\r\n\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t<Modal.Title>Chat Room</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t<Modal.Body style={{ overflow: \"auto\", overflowY: \"auto\", height: \"400px\", textAlign: \"left\" }} >\r\n\t\t\t\t\t\t\t\t{this.state.messages.length > 0 ? this.state.messages.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div key={index} style={{textAlign: \"left\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ wordBreak: \"break-all\" }}><b>{item.sender}</b>: {item.data}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)) : <p>No message yet</p>}\r\n\t\t\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer className=\"div-send-msg\">\r\n\t\t\t\t\t\t\t\t<Input placeholder=\"Message\" value={this.state.message} onChange={e => this.handleMessage(e)}/>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.sendMessage}>Send</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<div className=\"room-link\">\r\n\t\t\t\t\t\t\t\t{/* <TextField value={window.location.href} disable=\"true\"></TextField><br /> */}\r\n\t\t\t\t\t\t\t\t<div>ROOM ID : {this.state.path[this.state.path.length-1]}</div><br />\r\n\t\t\t\t\t\t\t\t<Button variant=\"outlined\" color=\"primary\" className=\"copybtn\" onClick={this.copyUrl}>Copy invite link</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div id=\"main\" className=\"flex-container\" style={{ margin: 0, padding: 0 }}>\r\n\t\t\t\t\t\t\t\t<video id={this.state.myVideoClass} ref={this.localVideoref} autoPlay muted>\r\n\t\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Video","export default __webpack_public_path__ + \"static/media/mslogo.2d27c41f.svg\";","/** @format */\r\n\r\nimport React, { useState } from 'react'\r\nimport './Navbar.css'\r\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink } from 'reactstrap'\r\nimport mslogo from '../../shared/images/mslogo.svg'\r\nimport NavItems from '../../shared/storage/data.js'\r\n\r\nfunction NavbarMain(props) {\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst [cname, setCname] = useState('animated-icon1')\r\n\tconst toggle = () => {\r\n\t\tsetIsOpen(!isOpen)\r\n\t\tvar css = cname === 'animated-icon1' ? 'animated-icon1 open' : 'animated-icon1'\r\n\t\tsetCname(css)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={{justifyContent: 'center',}}>\r\n\t\t\t<section className='mb-3'>\r\n\t\t\t\t<Navbar color='light' light expand='md'>\r\n\t\t\t\t\t<div className='container-fluid'>\r\n\t\t\t\t\t\t<NavbarBrand href='/home'>\r\n\t\t\t\t\t\t\tMEETS_HUB\r\n\t\t\t\t\t\t\t{/* <img src={mslogo} alt='MS logo' /> */}\r\n\t\t\t\t\t\t</NavbarBrand>\r\n\t\t\t\t\t\t<NavbarToggler className='first-Button' onClick={toggle}>\r\n\t\t\t\t\t\t\t<div className={cname}>\r\n\t\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</NavbarToggler>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Collapse isOpen={isOpen} navbar>\r\n\t\t\t\t\t\t<Nav className='mr-auto' navbar>\r\n\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t<NavLink href='/components/'>Components</NavLink>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t{NavItems.map((item) => (\r\n\t\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t\t<NavLink href={item.link}>{item.product}</NavLink>\r\n\t\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t</Navbar>\r\n\t\t\t</section>\r\n\t\t\t<div className='info'>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tNow use MEETS_HUB with family and friends to call, chat, and make plans.\r\n\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t<a href='/home'>Learn more {'>'}</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default NavbarMain\r\n","import {React, useState} from 'react';\r\nimport { Button, Modal, ModalHeader, ModalBody, Input, Label, Form, FormGroup } from 'reactstrap';\r\nimport './Login.css'\r\n\r\nfunction Login(props) {\r\n\r\n    // can be changed to false in case u want new values enter every time\r\n    const [unmountOnClose] = useState(false);\r\n    const [formdata, setformData] = useState({});\r\n\r\n    const handleChange = (e) =>{\r\n        setformData({...formdata, [e.target.name] : e.target.value});\r\n    }\r\n\r\n    const handleLogin = (event) =>{\r\n        event.preventDefault();\r\n        toggleModal();\r\n        props.loginUser(formdata);\r\n    }\r\n  \r\n    const toggleModal = () => props.setLogin(!props.login);\r\n\r\n    return (\r\n        <div>\r\n            <Modal isOpen={props.login} toggle={toggleModal} className=\"login\" unmountOnClose={unmountOnClose}>\r\n                <ModalHeader toggle={toggleModal}>Login</ModalHeader>\r\n                <ModalBody>\r\n                    <Form onSubmit={handleLogin} className=\"row\">\r\n                        <FormGroup>\r\n                        <Label for=\"email\" className=\"col-5 col-sm-12\">Username</Label>\r\n                            <Input className=\"col-7 col-sm-12\" type=\"text\" name=\"username\" onChange={handleChange} id=\"username\" required={true} placeholder=\"Username\" />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label className=\"col-5 col-sm-12\" for=\"password\">Password</Label>\r\n                            <Input className=\"col-7 col-sm-12\" type=\"password\" name=\"password\" onChange={handleChange} id=\"password\" required={true} placeholder=\"password\" />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Button type=\"submit\" value=\"submit\" className=\"c-button-up small\">Login</Button>{' '}\r\n                        </FormGroup>\r\n                    </Form>\r\n                </ModalBody>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","export const baseUrl = 'https://shub-meet-api.herokuapp.com/';","import {React, useState} from 'react'\r\nimport { Button, Modal, ModalHeader, ModalBody, Input, Label, Form, FormGroup } from 'reactstrap';\r\nimport './Signup.css';\r\nimport {baseUrl} from '../../shared/basUrl';\r\n\r\nfunction Signup(props) {\r\n    // can be changed to false in case u want new values enter every time\r\n    const [formData, setFormData] = useState({});\r\n\r\n    const RegisterUser = (data) =>{\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(data)\r\n        };\r\n        return fetch(baseUrl+'users/signup', requestOptions)\r\n        .then(response => response.json())\r\n        .then(response => {\r\n            if(response.err){\r\n                document.querySelector('.registrationError').innerHTML= response.err.message;\r\n            }\r\n            else{\r\n                document.querySelector('.successDisplay').innerHTML = response.status;\r\n                document.querySelector('.errorDisplay').innerHTML = '';\r\n            }\r\n        })\r\n        .catch(error => console.error(error));\r\n    }\r\n\r\n    const handleChange = (e) =>{\r\n        setFormData({...formData, [e.target.name] : e.target.value});\r\n    }\r\n\r\n    const handleSignup = (event) =>{\r\n        event.preventDefault();\r\n        if(event.target.password.value.length <= 5){\r\n            document.querySelector('.registrationError').innerHTML = \"Length of password must be greater than 5\";\r\n        }\r\n        else if(event.target.password.value === event.target.cpassword.value){\r\n            RegisterUser(formData);\r\n            toggleModal();\r\n        }\r\n        else{\r\n            document.querySelector('.registrationError').innerHTML = \"Both passwords dont match . Try again !\";\r\n        }\r\n    }\r\n\r\n    const toggleModal = () => props.setSignin(!props.sign);\r\n\r\n    return (\r\n        <div>\r\n            <Modal isOpen={props.sign} toggle={toggleModal} className=\"login\" unmountOnClose={false}>\r\n                <ModalHeader toggle={toggleModal}>Signup</ModalHeader>\r\n                <ModalBody>\r\n                <Form onSubmit={handleSignup} onChange={handleChange}>\r\n                    <FormGroup>\r\n                        <Label className=\"col-5 col-sm-12\" for=\"name\">Name</Label>\r\n                        <Input className=\"col-7 col-sm-12\" type=\"text\" name=\"name\" id=\"name\" placeholder=\"Name\" required={true}/>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label className=\"col-5 col-sm-12\" for=\"username\">Username</Label>\r\n                        <Input className=\"col-7 col-sm-12\" type=\"text\" name=\"username\" id=\"username\" placeholder=\"Username\" required={true}/>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label className=\"col-5 col-sm-12\" for=\"password\">Password</Label>\r\n                        <Input className=\"col-7 col-sm-12\" type=\"password\" name=\"password\" id=\"password\" placeholder=\"password\" required={true}/>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label className=\"col-5 col-sm-12\" for=\"confirmPassword\">Confirm Password</Label>\r\n                        <Input className=\"col-7 col-sm-12\" type=\"password\" name=\"cpassword\" id=\"cpassword\" placeholder=\"Confirm password\" required={true}/>\r\n                    </FormGroup>\r\n                    <Button color=\"primary\" type=\"submit\" className=\"c-button-up\">Register</Button>\r\n                </Form>\r\n                </ModalBody>\r\n                <div className=\"registrationError\"></div>\r\n            </Modal>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signup","import React, {useState} from 'react'\r\nimport {Button} from 'reactstrap'\r\nimport {Link} from 'react-router-dom'\r\nimport './SignButtons.css'\r\nimport Login from '../../Containers/Login/Login'\r\nimport Signup from '../../Containers/Signup/Signup'\r\n\r\nfunction SignButtons(props) {\r\n    const [login,setLogin] = useState(false);\r\n    const [sign, setSignin] = useState(false);\r\n    \r\n    const toggleLog = () => setLogin(!login);\r\n    const toggleSign = () => setSignin(!sign);\r\n\r\n    const handleLogout = () =>{\r\n        props.logoutUser();\r\n    }\r\n\r\n    return (\r\n        <div className=\"c-group links\">\r\n            {\r\n                props.auth.isAuthenticated?\r\n                <div>\r\n                    <br /><br />\r\n                <h3 className=\"text-success text-center\"> Succesfully logged in as\r\n                    <span>\r\n                     {' '}\r\n                     { props.auth.user? props.auth.user.username : null } \r\n                    </span>\r\n                </h3>\r\n                <br />\r\n                <div className=\"text-center\" >\r\n                    <Button outline onClick={handleLogout}>\r\n                        <span className=\"fa fa-sign-out fa-lg\"></span> Logout\r\n                        { \r\n                            props.auth.isLoading ?\r\n                            <span className=\"fa fa-spinner fa-pulse fa-fw\"></span>\r\n                            : null\r\n                        }\r\n                    </Button>\r\n                    {'  '}\r\n                    <Link to=\"/dashboard\" className=\"btn\" style={{backgroundColor: '#4b53bc', color: 'white'}}>Go to dashboard</Link>\r\n                </div>\r\n                </div>\r\n                :\r\n                <div>\r\n                    <div className=\"text-center\">\r\n                        <Button onClick={toggleLog} className=\"c-button-up\" target=\"_blank\" >\r\n                        <span className=\"fa fa-sign-out fa-lg\"></span> Sign in{' '}\r\n                        { \r\n                            props.auth.isLoading ?\r\n                            <span className=\"fa fa-spinner fa-pulse fa-fw\"></span>\r\n                            : null\r\n                        }\r\n                        </Button>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        <Button onClick={toggleSign} className=\"c-button-in\" target=\"_blank\" >\r\n                            Sign up for free\r\n                        </Button>\r\n                    </div>\r\n                    {\r\n                        (props.auth.errMess)?\r\n                        <div className=\"errorDisplay\">Invalid Credentials / Error Occured</div>\r\n                        : null\r\n                    }\r\n                    <div className=\"errorDisplay\"></div>\r\n                    <div className=\"successDisplay\"></div>\r\n                </div>\r\n            }\r\n            {\r\n                (login && !props.auth.isAuthenticated)?\r\n                    <Login loginUser={props.loginUser} login={login} auth={props.auth} setLogin={setLogin} />\r\n                :null\r\n            }\r\n            {\r\n                (!props.auth.isAuthenticated && sign)?\r\n                    <Signup sign={sign} auth={props.auth} setSignin={setSignin} />:null\r\n            }\r\n            <br />\r\n            <br />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignButtons","export default __webpack_public_path__ + \"static/media/demo.f4bf9a4a.webp\";","/** @format */\r\n\r\nimport React from 'react'\r\nimport './jumbotron.css'\r\nimport SignButtons from '../SignButtons/SignButtons'\r\nimport demo from '../../shared/images/demo.webp'\r\nimport { Grid, Row, Col } from 'react-flexbox-grid'\r\n\r\nfunction jumbotron(props) {\r\n\treturn (\r\n\t\t<Grid fluid>\r\n\t\t\t<Row className='flexbox row'>\r\n\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t<div className='content'>\r\n\t\t\t\t\t\t<h1 className='c-heading-1'>MEETS_HUB</h1>\r\n\t\t\t\t\t\t<p className='c-heading-2'>\r\n\t\t\t\t\t\t\tMeet, chat, call, and collaborate in just one place.\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{/* Rendering signin and signup */}\r\n\t\t\t\t\t\t<SignButtons\r\n\t\t\t\t\t\t\tauth={props.auth}\r\n\t\t\t\t\t\t\tloginUser={props.loginUser}\r\n\t\t\t\t\t\t\tlogoutUser={props.logoutUser}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tsrc={demo}\r\n\t\t\t\t\t\talt='A family video call on Teams and the chat screen in Teams showing many conversations.'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default jumbotron\r\n","import React from 'react'\r\nimport Navbar from '../../Components/Navbar/Navbar';\r\nimport Jtron from '../../Components/Jumbotron/jumbotron';\r\n\r\nfunction Homepage(props) {\r\n\r\n    return (\r\n        <div>\r\n            <Navbar />\r\n            <Jtron auth={props.auth}  loginUser={props.loginUser} logoutUser={props.logoutUser}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Homepage\r\n","import React, { useState } from 'react';\r\nimport { Input, Button, Form, FormGroup, Label } from 'reactstrap';\r\nimport \"./Home.css\"\r\n\r\nfunction Home(props) {\r\n\tconst [url, setUrl] = useState('');\r\n\r\n\tconst handleChange = (event) => setUrl(event.target.value);\r\n\r\n\tconst joinRoom = (event) => {\r\n\t\tif(url.length === 5){\r\n\t\t\twindow.location.href = `/room/${url}`\r\n\t\t}\r\n\t\telse if (url !== \"\") {\r\n\t\t\tvar room = url.split(\"/\");\r\n\t\t\tvar roomCode = room[room.length-1];\r\n\t\t\tif(roomCode.length !== 5){\r\n\t\t\t\tdocument.getElementById('join-error').innerHTML = \"Invalid URL / Room Code\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\twindow.location.href = `/room/${roomCode}`;\r\n\t\t} else {\r\n\t\t\t// uuid can be used\r\n\t\t\tvar newurl = Math.random().toString(36).substring(2, 7)\r\n\t\t\twindow.location.href = `/room/${newurl}`\r\n\t\t}\r\n\t\tevent.preventDefault();\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"container2\">\r\n\t\t\t<div>\r\n\t\t\t\t<h1 class=\"welcome-text\">\r\n\t\t\t\t\tWelcome, {props.auth.user.username}\r\n\t\t\t\t</h1>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tStay in touch with all your friends, anytime , anywhere.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"joinBox\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\tEnter the room code , paste the URL or start a meeting now\r\n\t\t\t\t</p>\r\n\t\t\t\t<Form onSubmit={joinRoom}>\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<Label for=\"url\"></Label>\r\n\t\t\t\t\t\t<Input type=\"text\" name=\"url\" id=\"url\" placeholder=\"URL / room code\" onChange={e => handleChange(e)} />\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<Button type=\"submit\" value=\"submit\" color=\"primary\">Connect</Button>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t<span>* click connect directly to create a new room</span>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<div id=\"join-error\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Home;","import React from 'react'\r\nimport Header from '../../Components/Header/Header';\r\nimport Home from '../MeetStart/Home';\r\n\r\nfunction Dashboard(props) {\r\n    return (\r\n        <div>\r\n            <Header logoutUser = {props.logoutUser} auth = {props.auth} />\r\n            <Home auth = {props.auth}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard\r\n","export const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\r\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILURE = 'LOGOUT_FAILURE';\r\nexport const ALERT_FADE = 'ALERT_FADE';","import * as ActionTypes from './ActionTypes';\r\nimport { baseUrl } from '../shared/basUrl';\r\n\r\nexport const requestLogin = (creds) => {\r\n    return {\r\n        type: ActionTypes.LOGIN_REQUEST,\r\n        creds\r\n    }\r\n}\r\n  \r\nexport const receiveLogin = (response) => {\r\n    return {\r\n        type: ActionTypes.LOGIN_SUCCESS,\r\n        token: response.token\r\n    }\r\n}\r\n  \r\nexport const loginError = (message) => {\r\n    return {\r\n        type: ActionTypes.LOGIN_FAILURE,\r\n        message\r\n    }\r\n}\r\n\r\nexport const loginUser = (creds) => (dispatch) => {\r\n    // We dispatch requestLogin to kickoff the call to the API\r\n    dispatch(requestLogin(creds))\r\n\r\n    return fetch(baseUrl + 'users/login', {\r\n        method: 'POST',\r\n        headers: { \r\n            'Content-Type':'application/json' \r\n        },\r\n        body: JSON.stringify(creds)\r\n    })\r\n    .then(response => {\r\n        if (response.ok) {\r\n            return response;\r\n        } else {\r\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\r\n            error.response = response;\r\n            throw error;\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n        })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n        if (response.success) {\r\n            // If login was successful, set the token in local storage\r\n            localStorage.setItem('token', response.token);\r\n            //dont save pass\r\n            localStorage.setItem('creds', JSON.stringify(creds));\r\n            // Dispatch the success action\r\n            // dispatch(fetchFavorites());\r\n            dispatch(receiveLogin(response));\r\n        }\r\n        else {\r\n            var error = new Error('Error ' + response.status);\r\n            error.response = response;\r\n            document.querySelector('.errorDisplay').innerHTML = \"An error occured !!\";\r\n            throw error;\r\n        }\r\n    })\r\n    .catch(error => dispatch(loginError(error.message)))\r\n};\r\n\r\nexport const requestLogout = () => {\r\n    return {\r\n      type: ActionTypes.LOGOUT_REQUEST\r\n    }\r\n}\r\n  \r\nexport const receiveLogout = () => {\r\n    return {\r\n      type: ActionTypes.LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n// Logs the user out\r\nexport const logoutUser = () => (dispatch) => {\r\n    dispatch(requestLogout())\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('creds');\r\n    // dispatch(favoritesFailed(\"Error 401: Unauthorized\"));\r\n    dispatch(receiveLogout())\r\n}\r\n\r\nexport const alertFade = () => {\r\n    return {\r\n      type: ActionTypes.ALERT_FADE\r\n    }\r\n}\r\n","import React from 'react';\r\nimport './ConversationSearch.css';\r\n\r\nexport default function ConversationSearch() {\r\n    return (\r\n      <div className=\"conversation-search\">\r\n        <input\r\n          type=\"search\"\r\n          className=\"conversation-search-input\"\r\n          placeholder=\"Search Messages\"\r\n        />\r\n      </div>\r\n    );\r\n}","import React, {useEffect} from 'react';\r\nimport shave from 'shave';\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport './ConversationListItem.css';\r\n\r\nexport default function ConversationListItem(props) {\r\n  useEffect(() => {\r\n    shave('.conversation-snippet', 30);\r\n  })\r\n\r\n    const { name, text } = props.data;\r\n    const url = \"/conversations/\"+name;\r\n    return (\r\n      <div className=\"conversation-list-item\">\r\n        {/* <img className=\"conversation-photo\" src={photo} alt=\"conversation\" /> */}\r\n        <div className=\"conversation-info\">\r\n          <Link to={url} className=\"conversation-title\">{ name }</Link>\r\n          <p className=\"conversation-snippet\">{ text }</p>\r\n        </div>\r\n      </div>\r\n    );\r\n}","import React from 'react';\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n    const { title, leftItems, rightItems } = props;\r\n    return (\r\n      <div className=\"toolbar\">\r\n        <div className=\"left-items\">{ leftItems }</div>\r\n        <h1 className=\"toolbar-title\">{ title }</h1>\r\n        <div className=\"right-items\">{ rightItems }</div>\r\n      </div>\r\n    );\r\n}","import React from 'react';\r\nimport './ToolbarButton.css';\r\n\r\nexport default function ToolbarButton(props) {\r\n    const { icon } = props;\r\n    return (\r\n      <i className={`toolbar-button ${icon}`} onClick={props.onClickfn} />\r\n    );\r\n}","import {React, useState} from 'react';\r\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap'\r\nimport {Input, Button} from '@material-ui/core'\r\nimport './ConversationList.css'\r\nimport {useHistory} from 'react-router-dom';\r\nfunction MyDropdown() {\r\n\r\n    const [dropdownOpen, setDropdownOpen] = useState(false);\r\n    const toggle = () => setDropdownOpen(prevState => !prevState);\r\n    const [url, setUrl] = useState('');\r\n\tconst handleChange = (event) => setUrl(event.target.value);\r\n\r\n\tconst joinExistingRoom = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\t\r\n\t\tif(url.length === 5){\r\n\t\t\twindow.location.href = `/conversations/${url}`\r\n\t\t}\r\n\t\telse if (url !== \"\") {\r\n\t\t\tvar room = url.split(\"/\");\r\n\t\t\tvar roomCode = room[room.length-1];\r\n\t\t\tif(roomCode.length !== 5){\r\n\t\t\t\tdocument.getElementById('join-error').innerHTML = \"Invalid URL / Room Code\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\twindow.location.href = `/conversations/${roomCode}`;\r\n\t\t} else {\r\n\t\t\t// uuid can be used\r\n\t\t\tdocument.getElementById('join-error').innerHTML = \"Room code not entered\";\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tconst joinNewRoom = (event) =>{\r\n\t\tvar newurl = Math.random().toString(36).substring(2, 7);\r\n\t\twindow.location.href = `/conversations/${newurl}`;\r\n\t\tevent.preventDefault();\r\n\t}\r\n  \r\n    return (\r\n        <div>\r\n            <Dropdown isOpen={dropdownOpen} toggle={toggle}>\r\n            <DropdownToggle outline className=\"drop-icon\">\r\n                +\r\n            </DropdownToggle>\r\n            <DropdownMenu>\r\n                <DropdownItem style={{textAlign: 'center', color: 'blue'}} disabled>Enter/Create room</DropdownItem>\r\n                <Input type=\"text\" name=\"url\" id=\"url\" placeholder=\"URL / room code\" onChange={e => handleChange(e)} />\r\n                <Button variant=\"outlined\" color=\"primary\" onClick={joinExistingRoom} style={{marginLeft: '30px', marginTop: '10px'}} >Connect</Button>\r\n                <Button variant=\"outlined\" color=\"primary\" onClick={joinNewRoom} style={{marginLeft: '30px',marginRight: '30px', marginTop: '10px'}} >Create Room</Button>\r\n\t\t\t\t<div id=\"join-error\"></div>\r\n            </DropdownMenu>\r\n            </Dropdown>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyDropdown\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ConversationSearch from '../ConversationSearch';\r\nimport ConversationListItem from '../ConversationListItem';\r\nimport Toolbar from '../Toolbar';\r\nimport ToolbarButton from '../ToolbarButton';\r\nimport './ConversationList.css';\r\nimport {baseUrl} from '../../shared/basUrl'\r\nimport MyDropdown from './Dropdown'\r\n\r\nexport default function ConversationList(props) {\r\n\r\n  const [conversations, setConversations] = useState([]);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n      getConversations();\r\n      return history.listen((location)=>{\r\n        getConversations();\r\n      })\r\n  },[history]);\r\n\r\n\r\n const getConversations = () => {\r\n    const myHeader = new Headers();\r\n    myHeader.append('Accept', 'application/json');\r\n    myHeader.append('Content-Type', 'application/json');\r\n    myHeader.append('Authorization', 'bearer '+ localStorage.getItem(\"token\"));\r\n    \r\n    fetch(baseUrl+'groups', {\r\n      method: 'GET',\r\n      headers: myHeader\r\n    })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n        let newConversations = response.filter(resp=>{\r\n          if(resp.length!==5) return false;\r\n          return true;\r\n        }).map(result => {\r\n          return {\r\n            name: `${result}`,\r\n            text: \"Click on room to connect\"\r\n          };\r\n        });\r\n        setConversations([...conversations, ...newConversations])\r\n    });\r\n  }\r\n    return (\r\n      <div className=\"conversation-list\">\r\n        <Toolbar\r\n          title=\"Messenger\"\r\n          leftItems={[\r\n            <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\r\n          ]}\r\n          rightItems={[\r\n            <MyDropdown/>\r\n          ]}\r\n        />\r\n        <ConversationSearch />\r\n        {\r\n          conversations.map(conversation =>\r\n            <ConversationListItem\r\n              key={conversation.name}\r\n              data={conversation}\r\n            />\r\n          )\r\n        }\r\n     </div>\r\n    );\r\n}","import React from 'react';\r\nimport './Compose.css';\r\nimport { Form, Input } from 'reactstrap'\r\n\r\nexport default function Compose(props) {\r\n    return (\r\n      <div className=\"compose\">\r\n        <Form class=\"compose-form\" onSubmit={props.sendMessage}>\r\n          <Input\r\n            type=\"text\"\r\n            className=\"compose-input\"\r\n            placeholder=\"Type a message\"\r\n            value={props.message}\r\n            onChange={e => props.handleMessage(e)}\r\n          />\r\n        </Form>\r\n        {\r\n          props.rightItems\r\n        }\r\n\r\n      </div>\r\n    );\r\n}","import React from 'react';\r\nimport moment from 'moment';\r\nimport './Message.css';\r\n\r\nexport default function Message(props) {\r\n    const {\r\n      data,\r\n      isMine,\r\n      startsSequence,\r\n      endsSequence,\r\n      showTimestamp\r\n    } = props;\r\n\r\n    const friendlyTimestamp = moment(data.timestamp).format('LLLL');\r\n    return (\r\n      <div className={[\r\n        'message',\r\n        `${isMine ? 'mine' : ''}`,\r\n        `${startsSequence ? 'start' : ''}`,\r\n        `${endsSequence ? 'end' : ''}`\r\n      ].join(' ')}>\r\n        {\r\n          showTimestamp &&\r\n            <div className=\"timestamp\">\r\n              { friendlyTimestamp }\r\n            </div>\r\n        }\r\n        \r\n        <div className=\"bubble-container\">\r\n          <div className=\"bubble\" title={friendlyTimestamp}>\r\n          {!isMine? <div style={{fontWeight: 'bold'}}>{data.author}{':'}</div>: null} { data.message }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n}","import React, {useEffect, useState} from 'react';\r\nimport Compose from '../Compose';\r\nimport Toolbar from '../Toolbar';\r\nimport ToolbarButton from '../ToolbarButton';\r\nimport Message from '../Message';\r\nimport moment from 'moment';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport './MessageList.css';\r\nimport io from 'socket.io-client'\r\nimport {baseUrl} from '../../shared/basUrl'\r\nimport {peerConnectionConfig} from '../../Containers/Room/Helpers/peerConnectionConfig';\r\n\r\nexport default function MessageList(props) {\r\n  const MY_USER_ID = localStorage.getItem(\"creds\").split('\"')[3];\r\n  const [myconnections,setConnections] = useState({});\r\n  const [mysocket, setSocket] = useState(null);\r\n  var socketId = null\r\n  const [message,setMessage] = useState('');\r\n  const [messages, setMessages] = useState([])\r\n  const history = useHistory();\r\n  const [roomId, setRoomId] = useState('');\r\n\r\n  useEffect(() => {\r\n    getMessages();\r\n\r\n    return history.listen((location)=>{\r\n      console.log(location);\r\n      const currlocation = location.pathname.split(\"/\");\r\n      const roomId = currlocation[currlocation.length-1];\r\n      if(roomId.length === 5)\r\n      setRoomId(roomId);\r\n\r\n      connectToSocketServer();\r\n      getMessages();\r\n    })\r\n  },[history])\r\n\r\n  \r\n  const getMessages = () => {\r\n      const myHeader = new Headers();\r\n      myHeader.append('Accept', 'application/json');\r\n      myHeader.append('Content-Type', 'application/json');\r\n      myHeader.append('Authorization', 'bearer '+ localStorage.getItem(\"token\"));\r\n\r\n      const location = window.location.href.split(\"/\");\r\n      const roomId = location[location.length-1];\r\n\r\n      if(roomId.length !== 5) return;\r\n\r\n      setRoomId(roomId);\r\n\r\n      fetch(baseUrl+'groups/'+roomId, {\r\n        method: 'GET',\r\n        headers: myHeader\r\n      })\r\n      .then(response => response.json())\r\n      .then((response) => {\r\n        if(response.error) return;\r\n          let tempMessages = response.map(result => {\r\n            return {\r\n              id: result._id,\r\n              author: result.author,\r\n              message: result.content,\r\n              timestamp: result.createdAt\r\n            };\r\n          });\r\n          setMessages([ ...messages,...tempMessages])\r\n      })\r\n      .catch((err)=>console.error(err));\r\n      \r\n  }\r\n\r\n  const gotMessageFromServer = (fromId, message) => {\r\n\t\tvar signal = JSON.parse(message)\r\n\r\n\t\tif (fromId !== socketId) {\r\n\t\t\tif (signal.sdp) {\r\n        var connections = myconnections;\r\n\t\t\t\tconnections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\r\n\t\t\t\t\tif (signal.sdp.type === 'offer') {\r\n\t\t\t\t\t\tconnections[fromId].createAnswer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[fromId].setLocalDescription(description).then(() => {\r\n\t\t\t\t\t\t\t\tmysocket.emit('signal', fromId, JSON.stringify({ 'sdp': connections[fromId].localDescription }))\r\n\t\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n\t\t\tif (signal.ice) {\r\n\t\t\t\tconnections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n      setConnections(connections);\r\n\t\t}\r\n\t}\r\n\r\n  const addMessage = (data, sender, socketIdSender) => {\r\n    setMessages(msg=>[...msg,{ author: sender, message: data, id: '111', timestamp: new Date().getTime() }]);\r\n\t}\r\n\r\n  const connectToSocketServer = () => {\r\n    const socket = io.connect(baseUrl, {secure: true});\r\n    setSocket(socket);\r\n    // console.log(currsocket);\r\n\r\n    socket.on('signal', gotMessageFromServer);\r\n\r\n    socket.on('connect', ()=>{\r\n        socket.emit('join-call',{path: window.location.href, userId: localStorage.getItem(\"creds\").split('\"')[3]});\r\n        const socketId = socket.id;\r\n        console.log(socketId);\r\n        socket.on('chat-message', addMessage);\r\n\r\n        socket.on('user-left', (id)=>{\r\n            console.log(\"User left\");\r\n        });\r\n\r\n        socket.on('user-joined', (id,clients)=>{\r\n          var connections = myconnections;\r\n          clients.forEach((socketListId) => {\r\n            connections[socketListId] = new RTCPeerConnection(peerConnectionConfig)\r\n            // Wait for their ice candidate       \r\n            connections[socketListId].onicecandidate = function (event) {\r\n              if (event.candidate != null) {\r\n                socket.emit('signal', socketListId, JSON.stringify({ 'ice': event.candidate }))\r\n              }\r\n            }\r\n          })\r\n          if (id === socketId) {\r\n            for (let id2 in connections) {\r\n              if (id2 === socketId) continue\r\n              \r\n              try {\r\n                connections[id2].addStream(window.localStream)\r\n              } catch(e) {}\r\n        \r\n              connections[id2].createOffer().then((description) => {\r\n                connections[id2].setLocalDescription(description)\r\n                  .then(() => {\r\n                    socket.emit('signal', id2, JSON.stringify({ 'sdp': connections[id2].localDescription }))\r\n                  })\r\n                  .catch(e => console.error(e))\r\n              })\r\n            }\r\n          }\r\n\r\n          setConnections(connections);\r\n        });\r\n      })\r\n    }\r\n\r\n    const username = localStorage.getItem(\"creds\").split('\"')[3];\r\n    const handleMessage = (e) => setMessage(e.target.value);\r\n    const sendMessage = (e) => {\r\n      e.preventDefault();\r\n      if(message===\"\") return;\r\n\r\n      if(!mysocket){\r\n        connectToSocketServer();\r\n        return;\r\n      }\r\n      mysocket.emit('chat-message', message, username);\r\n      setMessage('');\r\n      renderMessages();\r\n      \r\n    }\r\n\r\n  const renderMessages = () => {\r\n    let i = 0;\r\n    let messageCount = messages.length;\r\n    let tempMessages = [];\r\n\r\n    while (i < messageCount) {\r\n      let previous = messages[i - 1];\r\n      let current = messages[i];\r\n      let next = messages[i + 1];\r\n      let isMine = current.author === MY_USER_ID;\r\n      let currentMoment = moment(current.timestamp);\r\n      let prevBySameAuthor = false;\r\n      let nextBySameAuthor = false;\r\n      let startsSequence = true;\r\n      let endsSequence = true;\r\n      let showTimestamp = true;\r\n\r\n      if (previous) {\r\n        let previousMoment = moment(previous.timestamp);\r\n        let previousDuration = moment.duration(currentMoment.diff(previousMoment));\r\n        prevBySameAuthor = previous.author === current.author;\r\n        \r\n        if(prevBySameAuthor && previous.message===current.message){\r\n          i++;\r\n          continue;\r\n        }\r\n\r\n        if (prevBySameAuthor && previousDuration.as('hours') < 1) {\r\n          startsSequence = false;\r\n        }\r\n\r\n        if (previousDuration.as('hours') < 1) {\r\n          showTimestamp = false;\r\n        }\r\n      }\r\n\r\n      if (next) {\r\n        let nextMoment = moment(next.timestamp);\r\n        let nextDuration = moment.duration(nextMoment.diff(currentMoment));\r\n        nextBySameAuthor = next.author === current.author;\r\n\r\n        if (nextBySameAuthor && nextDuration.as('hours') < 1) {\r\n          endsSequence = false;\r\n        }\r\n      }\r\n\r\n      tempMessages.push(\r\n        <Message\r\n          key={i}\r\n          isMine={isMine}\r\n          startsSequence={startsSequence}\r\n          endsSequence={endsSequence}\r\n          showTimestamp={showTimestamp}\r\n          data={current}\r\n        />\r\n      );\r\n\r\n      // Proceed to the next message.\r\n      i += 1;\r\n    }\r\n\r\n    return tempMessages;\r\n  }\r\n\r\n    if(roomId==='') return(\r\n      <div>\r\n        <div className=\"start-text-info\">Choose a Conversation to chat</div>\r\n        <div className=\"start-text-info\">Click + option besides Messenger to start a new Conversation</div>\r\n      </div>\r\n    );\r\n    else\r\n    return(\r\n      <div className=\"message-list\">\r\n        <Toolbar\r\n          title={`Room_ID : ${roomId}`}\r\n          rightItems={[\r\n            <ToolbarButton key=\"info\" icon=\"ion-ios-log-out\" onClickfn={props.logoutUser}/>,\r\n            <Link exact to={`/room/${roomId}`} ><ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" /></Link>\r\n          ]}\r\n        />\r\n\r\n        <div className=\"message-list-container\">{renderMessages()}</div>\r\n        <div className=\"wait\"></div>\r\n\r\n\r\n        <Compose message={message} sendMessage={sendMessage} handleMessage={handleMessage} rightItems={[\r\n          <ToolbarButton key=\"send\" icon=\"ion-ios-send\" onClickfn={sendMessage}/>\r\n        ]} />\r\n      </div>\r\n    );\r\n}","import React from 'react';\r\nimport ConversationList from '../ConversationList';\r\nimport MessageList from '../MessageList';\r\nimport './Messenger.css';\r\n\r\nexport default function Messenger(props) {\r\n    return (\r\n      <div className=\"messenger\">\r\n        <div className=\"scrollable sidebar\">\r\n          <ConversationList />\r\n        </div>\r\n\r\n        <div className=\"scrollable content\">\r\n          <MessageList logoutUser={props.logoutUser}/>\r\n        </div>\r\n      </div>\r\n    );\r\n}","import React from 'react';\r\nimport Messenger from '../Messenger/Messenger';\r\nimport Header from '../../Components/Header/Header'\r\n\r\nexport default function App(props) {\r\n    return (\r\n      <div className=\"App\">\r\n        <Header logoutUser={props.logoutUser} />\r\n        <Messenger logoutUser={props.logoutUser}/>\r\n      </div>\r\n    );\r\n}","import React, { Component } from 'react'\r\nimport Video from './Containers/Room/Video'\r\nimport Home from './Containers/Homepage/Homepage';\r\nimport Dashboard from './Containers/Dashboard/Dashboard';\r\nimport { BrowserRouter as Router, Switch, Route, Redirect, withRouter } from 'react-router-dom';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\nimport { connect } from 'react-redux';\r\nimport { loginUser, logoutUser } from './redux/ActionCreators';\r\nimport {baseUrl} from './shared/basUrl';\r\nimport ChatApp from './Messenger/App/index';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      auth: state.auth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tloginUser: (creds) => dispatch(loginUser(creds)),\r\n\tlogoutUser: () => dispatch(logoutUser()),\r\n\t// alertFade: () => dispatch(alertFade()),\r\n});\r\n\r\n\r\nclass App extends Component {\r\n\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tif(!this.props.auth.token) return;\r\n\r\n\t\tconst myHeaders = new Headers();\r\n\t\tmyHeaders.append('Authorization', 'bearer '+localStorage.getItem(\"token\"));\r\n\t\tmyHeaders.append('Content-Type', 'application/json');\r\n\t\t\r\n\t\tfetch(baseUrl+'users/checkJWTToken',{\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: myHeaders\r\n\t\t})\r\n\t\t.then(response => response.json())\r\n\t\t.then(data =>{\r\n\t\t\tconsole.log(\"data\",data);\r\n\t\t\tif(!data.success && !data.error){\r\n\t\t\t\tthis.props.logoutUser();\r\n\t\t\t\tconsole.log(\"khatam\");\r\n\t\t\t\tthis.props.history.push(\"/home\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tif(!this.props.auth.token) return;\r\n\t\t\r\n\t\tconst myHeaders = new Headers();\r\n\t\tmyHeaders.append('Authorization', 'bearer '+localStorage.getItem(\"token\"));\r\n\t\tmyHeaders.append('Content-Type', 'application/json');\r\n\t\t\r\n\t\tfetch(baseUrl + 'users/checkJWTToken',{\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: myHeaders\r\n\t\t})\r\n\t\t.then(response => response.json())\r\n\t\t.then(data =>{\r\n\t\tconsole.log(\"data\",data);\r\n\t\tif(!data.success && !data.error){\r\n\t\t\t\tthis.props.logoutUser();\r\n\t\t\t\tthis.props.history.push(\"/home\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst HomePage = () =>{\r\n\t\t\treturn(\r\n\t\t\t\t<Home auth={this.props.auth} \r\n\t\t\t\t\tloginUser={this.props.loginUser} \r\n\t\t\t\t\tlogoutUser={this.props.logoutUser} \r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst Mydashboard = () =>{\r\n\t\t\treturn(\r\n\t\t\t\t<Dashboard logoutUser = {this.props.logoutUser} auth = {this.props.auth} />\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst MyRoom = () =>{\r\n\t\t\treturn(\r\n\t\t\t\t<Video auth = {this.props.auth} />\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst Messenger = () =>{\r\n\t\t\treturn(\r\n\t\t\t\t<ChatApp auth = {this.props.auth} logoutUser={this.props.logoutUser}/>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\r\n\t\tconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n\t\t\t<Route {...rest} render={(props) => (\r\n\t\t\t  this.props.auth.isAuthenticated\r\n\t\t\t\t? <Component {...props} />\r\n\t\t\t\t: <Redirect to={{\r\n\t\t\t\t\tpathname: '/home',\r\n\t\t\t\t\tstate: { from: props.location }\r\n\t\t\t\t  }} />\r\n\t\t\t)} />\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<TransitionGroup>\r\n\t\t\t\t\t\t<CSSTransition key={this.props.location.key} classNames=\"page\" timeout={300}>\r\n\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t<Route exact path = \"/home\" component = {HomePage} />\r\n\t\t\t\t\t\t\t\t<PrivateRoute exact path = \"/dashboard\" component = {Mydashboard} />\r\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/room/:roomId\" component={MyRoom}  />\r\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/conversations\" component={Messenger} />\r\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/conversations/:roomId\" component={Messenger} />\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/home\" />\r\n\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t</CSSTransition>\r\n\t\t\t\t\t</TransitionGroup>\r\n\t\t\t\t</Router>\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));","import * as ActionTypes from './ActionTypes';\r\n\r\n// The auth reducer. The starting state sets authentication\r\n// based on a token being in local storage. In a real app,\r\n// we would also want a util to check if the token is expired.\r\nexport const Auth = (state = {\r\n        isLoading: false,\r\n        isAuthenticated: localStorage.getItem('token') ? true : false,\r\n        token: localStorage.getItem('token'),\r\n        user: localStorage.getItem('creds') ? JSON.parse(localStorage.getItem('creds')) : null,\r\n        errMess: null\r\n    }, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.LOGIN_REQUEST:\r\n            return {...state,\r\n                isLoading: true,\r\n                isAuthenticated: false,\r\n                user: action.creds\r\n            };\r\n        case ActionTypes.LOGIN_SUCCESS:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: true,\r\n                errMess: '',\r\n                token: action.token\r\n            };\r\n        case ActionTypes.LOGIN_FAILURE:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: false,\r\n                errMess: action.message\r\n            };\r\n        case ActionTypes.LOGOUT_REQUEST:\r\n            return {...state,\r\n                isLoading: true,\r\n                isAuthenticated: true\r\n            };\r\n        case ActionTypes.LOGOUT_SUCCESS:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: false,\r\n                token: '',\r\n                user: null\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}","export const InitialFeedback = {\r\n    firstname: '',\r\n    lastname: '',\r\n    telnum: '',\r\n    email: '',\r\n    agree: false,\r\n    contactType: 'Tel.',\r\n    message: ''\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { ConfigureStore } from './redux/configureStore';\r\n\r\nconst store = ConfigureStore();\r\n\r\nReactDOM.render(\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals(console.log);","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport { createForms } from 'react-redux-form';\r\nimport { Auth } from './auth';\r\nimport thunk from 'redux-thunk';\r\nimport logger from 'redux-logger';\r\nimport { InitialFeedback } from './forms';\r\n\r\nexport const ConfigureStore = () => {\r\n    const store = createStore(\r\n        combineReducers({\r\n            auth: Auth,\r\n            ...createForms({\r\n                feedback: InitialFeedback\r\n            })\r\n        }),\r\n        applyMiddleware(thunk, logger)\r\n    );\r\n\r\n    return store;\r\n}"],"sourceRoot":""}